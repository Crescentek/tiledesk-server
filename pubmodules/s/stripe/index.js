var _0x26cc=['Error\x20saving\x20object.','stripe\x20sig:\x20','updateProjectProfile\x20Error\x20','***\x20***\x20customer.subscription.deleted\x20','saveFirstInvoicePaymentSucceeded\x20subscriptionid','express','stripe','detachPaymentFunc\x20result\x20','--\x20>\x20updatesubscription\x20Error\x20getting\x20project\x20','subscription.deleted','current_period_end','object','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment\x20>\x20project_id:\x20','get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20','moment','jwt','--\x20>\x20checkoutSession\x20get\x20by\x20id\x20from\x20stripe\x20\x20err\x20','--\x20>\x20get\x20customer\x20from\x20db\x20>\x20customer\x20+\x20paymentMethods\x20','status','ObjectId','PAYMENT_STRIPE_APIKEY','log','»»»\x20»»»\x20\x20update\x20customer\x20-\x20customerid\x20from\x20params\x20','raw','info','expiration_date_month','debug','!!!!!!!!\x20HI\x20!!!!!!!!\x20checkout.session.completed','stripe\x20plan_name:\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20','typeof\x20','save','--\x20>\x20updatesubscription\x20\x20project\x20','payment','--\x20>\x20checkoutSession\x20params.sessionid\x20','paymentMethods','project_id','/payment_methods/:customerid','stripe\x20endpointSecret','customer','stripe\x20apiKey','data','current_period_start','findByIdAndUpdate','post','params','free','asc','--\x20>\x20cancelsubscription\x20confirmation\x20','»»»\x20»»»\x20get\x20customer\x20from\x20db\x20-\x20projectid','user_id','***\x20***\x20checkout.session.completed\x20-\x20getSubscription\x20***\x20end\x20***\x20:\x20','sessionid','subscription_create','subscriptionid','application/json','checkout.session.completed','stripe\x20client_reference_id','list','message','constructEvent','put','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment\x20typeof\x20subsptn_payment:\x20','--\x20>\x20cancelsubscription\x20\x20project\x20','checkout','webhooks','credit_card_num','--\x20>\x20GET\x20SUBSCRIPTION\x20PAYMENTS\x20ERRORt\x20','»»»\x20»»»\x20cancelsubscription\x20projectid','savedSubscriptionPayment\x20>>\x20','../../../models/project','Types','»»»\x20»»»\x20updatesubscription\x20userid','»»»\x20»»»\x20updatesubscription\x20price','env','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20agents\x20typeof','»»»\x20»»»\x20\x20update\x20customer\x20-\x20cc\x20from\x20body\x20','\x20typeof\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20-\x20err\x20','»»»\x20»»»\x20\x20paymentMethod\x20attached\x20','../models/subscription-payment','***\x20***\x20invoice.payment_succeeded\x20-\x20index:\x20','price','***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20err\x20','send','basic','»»»\x20»»»\x20updatesubscription\x20projectid','USECASE\x20\x20invoice.payment_succeeded\x20\x20billing_reason\x20subscription_create\x20','stripe\x20project_id:\x20','»»»\x20»»»\x20cancelsubscription\x20userid','find','create','del','client_reference_id','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20find\x20Project\x20','---\x20>\x20ERROR\x20','/stripesubs/:subscriptionid','subscriptions','then','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile','--\x20>\x20subscription\x20get\x20by\x20id\x20from\x20stripe\x20\x20err\x20','saveFirstInvoicePaymentSucceeded\x20stripe_event','card','billing_reason','get','profile','error','/:subscriptionid','rawBody','invoice_settings','../../../config/winston','stripe-signature','»»»\x20»»»\x20\x20paymentMethod\x20attached\x20\x20error\x20','***\x20***\x20invoice.payment_succeeded\x20-\x20end:\x20','***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20subscr\x20object_type:\x20','end','Sandbox','attach','update','userid','YYYY-MM-DDTHH:mm:ss.SSS','detachPaymentFunct\x20>\x20paymentMethodid\x20','***\x20***\x20subscription\x20ID\x20','***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20subsptn_payment:\x20','customerid','\x20!!!!!!!!\x20HI\x20!!!!!!!!!!!\x20customer.subscription.deleted','/customer/:projectid','»»»\x20»»»\x20get\x20customer\x20from\x20db\x20','unix','findOne','/cancelsubscription','detach','forEach','Webhook\x20Error:\x20','json','invoice.payment_succeeded','customer.subscription.deleted\x20subscriptionPayment\x20project\x20id:\x20','customers','authenticate','lines','customer.subscription.deleted','catch','format','savedSubscriptionPayment\x20','subscription','split','--\x20>\x20get\x20customer\x20from\x20db\x20-\x20subscription\x20>\x20customer\x20id\x20','name','»»»\x20»»»\x20\x20paymentMethod\x20create\x20\x20error\x20','expiration_date_year','--\x20>\x20cancelsubscription\x20Error\x20getting\x20project\x20','/webhook','***\x20***\x20!!!!!!!!!!!!!!!!!!!!!!\x20checkout.session.completed\x20-\x20subscription\x20ID:\x20','****\x20Stripe\x20error\x20constructEvent:\x20','/customers/:customerid','***\x20***\x20invoice.payment_succeeded\x20-\x20subscription\x20ID:\x20','--\x20>\x20subscription\x20get\x20by\x20id\x20from\x20stripe\x20','»»»\x20»»»\x20\x20paymentMethod','../../../middleware/passport','--\x20>\x20checkoutSession\x20get\x20by\x20id\x20from\x20stripe\x20','retrieve','/checkoutSession/:sessionid','type','***\x20***\x20invoice.payment_succeeded\x20-\x20linesNum:\x20','body','***\x20***\x20checkout.session.completed\x20-\x20getSubscritionById\x20***\x20start\x20***\x20:\x20','period','exec','stripe\x20seats_numAsString:\x20','../../../middleware/valid-token','mongoose','body-parser','get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20>\x20paymentMethods.data\x20','passport','***\x20***\x20invoice.payment_succeeded\x20-\x20start:\x20','projectid','stripe\x20apiSecretKey'];(function(_0x271a79,_0x26ccde){var _0x59aa83=function(_0x18b241){while(--_0x18b241){_0x271a79['push'](_0x271a79['shift']());}};_0x59aa83(++_0x26ccde);}(_0x26cc,0x108));var _0x59aa=function(_0x271a79,_0x26ccde){_0x271a79=_0x271a79-0x0;var _0x59aa83=_0x26cc[_0x271a79];return _0x59aa83;};var express=require(_0x59aa('0x5f'));var router=express['Router']();var winston=require(_0x59aa('0x17'));var Project=require(_0x59aa('0xa0'));var SubscriptionPayment=require(_0x59aa('0xaa'));var moment=require(_0x59aa('0x68'));var mongoose=require(_0x59aa('0x53'));var passport=require(_0x59aa('0x56'));require(_0x59aa('0x47'))(passport);var validtoken=require(_0x59aa('0x52'));const apiKey=process[_0x59aa('0xa4')][_0x59aa('0x6e')];winston[_0x59aa('0x74')](_0x59aa('0x82')+apiKey);const stripe=require(_0x59aa('0x60'))(apiKey);const endpointSecret=process[_0x59aa('0xa4')]['PAYMENT_STRIPE_SECRET'];winston[_0x59aa('0x74')](_0x59aa('0x80')+endpointSecret);const apiSecretKey=process[_0x59aa('0xa4')]['PAYMENT_STRIPE_API_SECRET_KEY'];winston['debug'](_0x59aa('0x59')+apiSecretKey);const bodyParser=require(_0x59aa('0x54'));router[_0x59aa('0x86')](_0x59aa('0x40'),bodyParser[_0x59aa('0x71')]({'type':_0x59aa('0x91')}),function(_0x3f78f7,_0x203c25){winston[_0x59aa('0x74')]('»»»»\x20stripe\x20endpointSecret:\x20'+endpointSecret);winston[_0x59aa('0x74')]('»»»»\x20stripe\x20apiKey:\x20'+apiKey);winston[_0x59aa('0x74')](_0x59aa('0x59')+apiSecretKey);const _0x3e41a1=_0x3f78f7['headers'][_0x59aa('0x18')];winston[_0x59aa('0x74')](_0x59aa('0x5b'),_0x3e41a1);let _0x3f1ffa;try{_0x3f1ffa=stripe[_0x59aa('0x9b')][_0x59aa('0x96')](_0x3f78f7[_0x59aa('0x15')],_0x3e41a1,endpointSecret);}catch(_0x354f6a){winston['error'](_0x59aa('0x42'),_0x354f6a[_0x59aa('0x95')]);return _0x203c25[_0x59aa('0x6c')](0x190)['send'](_0x59aa('0x2e')+_0x354f6a['message']);}if(_0x3f1ffa[_0x59aa('0x4b')]===_0x59aa('0x92')){winston[_0x59aa('0x74')](_0x59aa('0x75'));const _0x4f2129=_0x3f1ffa[_0x59aa('0x83')][_0x59aa('0x65')];winston[_0x59aa('0x72')]('stripe\x20checkout.session.completed',_0x4f2129);var _0x157cb2=_0x4f2129[_0x59aa('0x6')];winston[_0x59aa('0x72')](_0x59aa('0x93'),_0x157cb2);var _0x4190c0=_0x157cb2[_0x59aa('0x3a')]('_')[0x0];winston[_0x59aa('0x72')]('stripe\x20user_id:'+_0x4190c0);var _0x390de1=_0x157cb2[_0x59aa('0x3a')]('_')[0x1];winston[_0x59aa('0x72')](_0x59aa('0x1')+_0x390de1);var _0x18b11b=_0x157cb2[_0x59aa('0x3a')]('_')[0x2];winston['info'](_0x59aa('0x76')+_0x18b11b);var _0xfd633f=_0x157cb2['split']('_')[0x3];winston['info']('stripe\x20seats_num:\x20'+_0xfd633f+_0x59aa('0x78'),typeof _0xfd633f);var _0x4b9bdb=Number(_0xfd633f);winston[_0x59aa('0x72')](_0x59aa('0x51')+_0x4b9bdb+_0x59aa('0xa7'),typeof _0x4b9bdb);var _0x1eda4f=_0x3f1ffa[_0x59aa('0x83')]['object'][_0x59aa('0x39')];winston[_0x59aa('0x72')](_0x59aa('0x41'),_0x1eda4f);getSubscritionById(_0x1eda4f)[_0x59aa('0xb')](function(_0x45dab0){var _0x5a84e5=_0x45dab0[_0x59aa('0x65')];winston[_0x59aa('0x72')](_0x59aa('0x1b'),_0x5a84e5);var _0x40a2da=moment[_0x59aa('0x29')](_0x45dab0[_0x59aa('0x84')])[_0x59aa('0x37')](_0x59aa('0x21'));winston[_0x59aa('0x72')](_0x59aa('0x4e'),_0x40a2da);var _0x2b9567=moment[_0x59aa('0x29')](_0x45dab0[_0x59aa('0x64')])[_0x59aa('0x37')](_0x59aa('0x21'));winston[_0x59aa('0x72')](_0x59aa('0x8d'),_0x2b9567);var _0x3dc87c={'profile':{'name':_0x18b11b,'type':_0x59aa('0x7b'),'subscription_creation_date':_0x40a2da,'subStart':_0x40a2da,'subEnd':_0x2b9567,'subscriptionId':_0x1eda4f,'last_stripe_event':_0x3f1ffa['type'],'agents':_0x4b9bdb}};updateProjectProfile(_0x390de1,_0x3dc87c,'checkout.session.completed');saveOnDB(_0x1eda4f,_0x390de1,_0x45dab0,_0x4190c0,_0x3f1ffa['type'],_0x18b11b,_0x4b9bdb);})['catch'](function(_0x284c1a){winston[_0x59aa('0x13')](_0x59aa('0xad'),_0x284c1a);});}if(_0x3f1ffa[_0x59aa('0x4b')]===_0x59aa('0x30')){winston[_0x59aa('0x72')]('\x20!!!!!!!!\x20HI\x20!!!!!!!!\x20invoice.payment_succeeded');winston[_0x59aa('0x72')]('***\x20***\x20invoice.payment_succeeded\x20-\x20BILLING\x20REASON\x20',_0x3f1ffa[_0x59aa('0x83')][_0x59aa('0x65')]['billing_reason']);var _0x1f6dbb=_0x3f1ffa[_0x59aa('0x83')]['object'][_0x59aa('0x34')]['total_count'];winston['info'](_0x59aa('0x4c'),_0x1f6dbb);var _0x367e05=_0x1f6dbb-0x1;winston[_0x59aa('0x72')](_0x59aa('0xab'),_0x367e05);var _0x47aa8e=moment[_0x59aa('0x29')](_0x3f1ffa['data'][_0x59aa('0x65')][_0x59aa('0x34')][_0x59aa('0x83')][_0x367e05][_0x59aa('0x4f')]['start'])[_0x59aa('0x37')]('YYYY-MM-DDTHH:mm:ss.SSS');winston[_0x59aa('0x72')](_0x59aa('0x57'),_0x47aa8e);var _0x9e9e33=moment[_0x59aa('0x29')](_0x3f1ffa[_0x59aa('0x83')][_0x59aa('0x65')][_0x59aa('0x34')][_0x59aa('0x83')][_0x367e05]['period'][_0x59aa('0x1c')])[_0x59aa('0x37')](_0x59aa('0x21'));winston[_0x59aa('0x72')](_0x59aa('0x1a'),_0x9e9e33);var _0x1eda4f=_0x3f1ffa['data'][_0x59aa('0x65')][_0x59aa('0x39')];winston['info']('***\x20***\x20invoice.payment_succeeded\x20-\x20subscription\x20ID:\x20',_0x1eda4f);if(_0x1eda4f==null){_0x1eda4f=_0x3f1ffa[_0x59aa('0x83')][_0x59aa('0x65')][_0x59aa('0x34')][_0x59aa('0x83')][0x0][_0x59aa('0x39')];winston[_0x59aa('0x72')](_0x59aa('0x44'),_0x1eda4f);}if(_0x3f1ffa['data'][_0x59aa('0x65')][_0x59aa('0x10')]!==_0x59aa('0x8f')){getSubByIdAndCheckoutSessionCompletedEvnt(_0x1eda4f)[_0x59aa('0xb')](function(_0x5719ae){winston['info'](_0x59aa('0x24'),_0x5719ae);winston['info'](_0x59aa('0x98'),typeof _0x5719ae);if(_0x5719ae){var _0x1997bc=_0x5719ae['project_id'];winston[_0x59aa('0x72')](_0x59aa('0x66'),_0x1997bc);Project['findOne']({'_id':_0x1997bc},function(_0x478c4e,_0x46bdba){if(_0x478c4e){winston[_0x59aa('0x72')](_0x59aa('0x7'),_0x478c4e);return _0x478c4e;}if(_0x46bdba){winston[_0x59aa('0x72')](_0x59aa('0x77'),_0x46bdba);winston[_0x59aa('0x72')](_0x59aa('0xc'),_0x46bdba[_0x59aa('0x12')]);var _0x46df46=_0x46bdba[_0x59aa('0x12')]['agents'];winston[_0x59aa('0x72')]('***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20agents',_0x46df46);var _0x18373b=_0x46bdba[_0x59aa('0x12')][_0x59aa('0x3c')];winston['info'](_0x59aa('0xa5'),typeof _0x46df46);var _0x931c42=_0x5719ae['user_id'];winston[_0x59aa('0x72')]('***\x20***\x20getSubByIdAndCheckoutSessionCompletedEvnt\x20\x20project\x20>\x20profile\x20>\x20name',_0x18373b);var _0x1afb4d={'profile':{'name':_0x18373b,'type':_0x59aa('0x7b'),'subStart':_0x47aa8e,'subEnd':_0x9e9e33,'subscriptionId':_0x1eda4f,'last_stripe_event':_0x3f1ffa['type'],'agents':_0x46df46}};updateProjectProfile(_0x1997bc,_0x1afb4d,_0x59aa('0x30'));saveOnDB(_0x1eda4f,_0x1997bc,_0x3f1ffa,_0x931c42,_0x3f1ffa[_0x59aa('0x4b')],_0x18373b,_0x46df46);}});}})[_0x59aa('0x36')](function(_0x45cfd4){winston['error'](_0x59aa('0xa8'),_0x45cfd4);});}else if(_0x3f1ffa['data'][_0x59aa('0x65')]['billing_reason']===_0x59aa('0x8f')){console[_0x59aa('0x6f')](_0x59aa('0x0'));saveFirstInvoicePaymentSucceeded(_0x1eda4f,_0x3f1ffa,_0x3f1ffa['type']);}}if(_0x3f1ffa['type']===_0x59aa('0x35')){winston['info'](_0x59aa('0x26'));winston[_0x59aa('0x72')]('customer.subscription.deleted\x20event\x20',_0x3f1ffa);var _0x1eda4f=_0x3f1ffa[_0x59aa('0x83')][_0x59aa('0x65')]['id'];winston['info'](_0x59aa('0x23'),_0x1eda4f);getSubByIdAndCheckoutSessionCompletedEvnt(_0x1eda4f)[_0x59aa('0xb')](function(_0x5b01e4){winston[_0x59aa('0x72')]('***\x20***\x20»»»\x20»»»\x20customer.subscription.deleted\x20subscriptionPayment\x20',_0x5b01e4);if(_0x5b01e4){var _0x51789b=_0x5b01e4[_0x59aa('0x7e')];winston[_0x59aa('0x72')](_0x59aa('0x31'),_0x51789b);var _0x1bfc9d=_0x5b01e4[_0x59aa('0x8c')];winston['info']('customer.subscription.deleted\x20subscriptionPayment\x20user\x20id:\x20',_0x1bfc9d);}var _0x4d9877={'profile':{'subscriptionId':_0x1eda4f,'name':_0x59aa('0x1d'),'type':_0x59aa('0x88'),'agents':0x1,'last_stripe_event':_0x3f1ffa[_0x59aa('0x4b')]}};updateProjectProfile(_0x51789b,_0x4d9877,_0x59aa('0x63'));saveOnDB(_0x1eda4f,_0x51789b,_0x3f1ffa[_0x59aa('0x83')]['object'],_0x1bfc9d,_0x3f1ffa[_0x59aa('0x4b')],_0x18b11b,0x1);})[_0x59aa('0x36')](function(_0x27086a){winston[_0x59aa('0x13')](_0x59aa('0x5d'),_0x27086a);});}_0x203c25[_0x59aa('0x2f')]({'received':!![]});});function getSubByIdAndCheckoutSessionCompletedEvnt(_0x5da5dd){return new Promise(function(_0x18e02b,_0x5b3294){SubscriptionPayment[_0x59aa('0x2a')]({'subscription_id':_0x5da5dd,'stripe_event':_0x59aa('0x92')},function(_0x2ccf63,_0x12c4f2){if(_0x2ccf63)_0x5b3294(_0x2ccf63);var _0x379e77=_0x12c4f2;_0x18e02b(_0x379e77);});});};function getSubscritionById(_0x3df9bb){return new Promise(function(_0x478eea,_0xf051b3){const _0x457917=require('stripe')(apiSecretKey);_0x457917[_0x59aa('0xa')]['retrieve'](_0x3df9bb,function(_0xd7aa63,_0x14fdb2){if(_0xd7aa63)_0xf051b3(_0xd7aa63);var _0x14fdb2=_0x14fdb2;_0x478eea(_0x14fdb2);});});};function updateProjectProfile(_0x56f422,_0x2620af,_0x39bb37){Project[_0x59aa('0x85')](_0x56f422,_0x2620af,{'new':!![],'upsert':!![]},function(_0x19258e,_0x3a5739){if(_0x19258e){winston[_0x59aa('0x13')](_0x59aa('0x5c'),_0x19258e);}else{winston[_0x59aa('0x74')](_0x3a5739);}});}function saveOnDB(_0x3d7e4d,_0x1b934f,_0x1d52b5,_0x41c5eb,_0x2d3897,_0x3221e5,_0x67b14d){winston['info']('saveOnDB\x20plan_name',_0x3221e5);winston[_0x59aa('0x72')]('saveOnDB\x20seats_num',_0x67b14d);var _0x228a4f=new SubscriptionPayment({'_id':new mongoose[(_0x59aa('0xa1'))][(_0x59aa('0x6d'))](),'subscription_id':_0x3d7e4d,'project_id':_0x1b934f,'user_id':_0x41c5eb,'stripe_event':_0x2d3897,'plan_name':_0x3221e5,'agents':_0x67b14d,'object':_0x1d52b5});_0x228a4f[_0x59aa('0x79')](function(_0x4e71fa,_0x10f8b4){if(_0x4e71fa){winston['error'](_0x59aa('0x8'),_0x4e71fa);return res[_0x59aa('0x6c')](0x1f4)[_0x59aa('0xae')]({'success':![],'msg':_0x59aa('0x5a')});}winston[_0x59aa('0x72')](_0x59aa('0x38'),_0x10f8b4);});}function saveFirstInvoicePaymentSucceeded(_0x1f6e91,_0x166c87,_0x4d118b){console[_0x59aa('0x6f')](_0x59aa('0x5e'),_0x1f6e91);console['log'](_0x59aa('0xe'),_0x4d118b);var _0x465956=new SubscriptionPayment({'_id':new mongoose['Types'][(_0x59aa('0x6d'))](),'subscription_id':_0x1f6e91,'stripe_event':_0x4d118b,'object':_0x166c87});_0x465956[_0x59aa('0x79')](function(_0x2ceb98,_0x470c48){if(_0x2ceb98){winston['error'](_0x59aa('0x8'),_0x2ceb98);return res[_0x59aa('0x6c')](0x1f4)[_0x59aa('0xae')]({'success':![],'msg':_0x59aa('0x5a')});}console[_0x59aa('0x6f')](_0x59aa('0x9f'),_0x470c48);});}router['put'](_0x59aa('0x2b'),[passport[_0x59aa('0x33')](['basic','jwt'],{'session':![]}),validtoken],function(_0x18f564,_0x455978){var _0x2d86e0=_0x18f564['body']['projectid'];var _0x4435b1=_0x18f564[_0x59aa('0x4d')][_0x59aa('0x20')];winston[_0x59aa('0x72')](_0x59aa('0x9e'),_0x2d86e0);winston[_0x59aa('0x72')](_0x59aa('0x2'),_0x4435b1);Project[_0x59aa('0x2a')]({'_id':_0x2d86e0},function(_0x359622,_0x2e91c9){if(_0x359622){winston[_0x59aa('0x13')](_0x59aa('0x3f'),_0x359622);return _0x359622;}if(_0x2e91c9){winston['info'](_0x59aa('0x99'),_0x2e91c9);var _0x2cb871=_0x2e91c9[_0x59aa('0x12')]['subscriptionId'];const _0xd0d70b=require(_0x59aa('0x60'))(apiSecretKey);_0xd0d70b[_0x59aa('0xa')][_0x59aa('0x5')](_0x2cb871,function(_0x4b210c,_0x5ee5a0){if(_0x4b210c){winston['error']('--\x20>\x20cancelsubscription\x20\x20err\x20',_0x4b210c);return _0x455978['status'](0x1f4)[_0x59aa('0xae')]({'success':![],'msg':_0x4b210c});}winston[_0x59aa('0x72')](_0x59aa('0x8a'),_0x5ee5a0);_0x455978['json'](_0x5ee5a0);});}});});router[_0x59aa('0x97')]('/updatesubscription',[passport['authenticate']([_0x59aa('0xaf'),_0x59aa('0x69')],{'session':![]}),validtoken],function(_0x5018b5,_0x1d851d){var _0x48314f=_0x5018b5[_0x59aa('0x4d')]['projectid'];var _0x186aeb=_0x5018b5[_0x59aa('0x4d')][_0x59aa('0x20')];var _0x286bf4=_0x5018b5[_0x59aa('0x4d')][_0x59aa('0xac')];winston[_0x59aa('0x72')](_0x59aa('0xb0'),_0x48314f);winston[_0x59aa('0x72')](_0x59aa('0xa2'),_0x186aeb);winston['info'](_0x59aa('0xa3'),_0x286bf4);const _0x503c2d=require(_0x59aa('0x60'))(apiSecretKey);Project['findOne']({'_id':_0x48314f},function(_0x34deed,_0x3962f9){if(_0x34deed){winston[_0x59aa('0x13')](_0x59aa('0x62'),_0x34deed);return _0x34deed;}if(_0x3962f9){winston[_0x59aa('0x72')](_0x59aa('0x7a'),_0x3962f9);var _0x19d57a=_0x3962f9[_0x59aa('0x12')]['subscriptionId'];_0x503c2d['subscriptions']['update'](_0x19d57a);}});});router[_0x59aa('0x11')](_0x59aa('0x14'),[passport[_0x59aa('0x33')](['basic',_0x59aa('0x69')],{'session':![]}),validtoken],function(_0x4af2e3,_0x2455e4){SubscriptionPayment[_0x59aa('0x3')]({'subscription_id':_0x4af2e3['params'][_0x59aa('0x90')]})['sort']({'object.created':_0x59aa('0x89')})[_0x59aa('0x50')](function(_0xe1a16e,_0x1a3729){if(_0xe1a16e){winston['error'](_0x59aa('0x9d'),project);return _0x2455e4[_0x59aa('0x6c')](0x1f4)['send']({'success':![],'msg':_0xe1a16e});}_0x2455e4[_0x59aa('0x2f')](_0x1a3729);});});router[_0x59aa('0x11')](_0x59aa('0x9'),[passport['authenticate']([_0x59aa('0xaf'),_0x59aa('0x69')],{'session':![]}),validtoken],function(_0x52b424,_0x54bbd3){winston[_0x59aa('0x72')]('--\x20>\x20subscription\x20get\x20by\x20id\x20freq.params.subscriptionid\x20',_0x52b424[_0x59aa('0x87')][_0x59aa('0x90')]);var _0x1cc114=require('stripe')(apiSecretKey);_0x1cc114['subscriptions'][_0x59aa('0x49')](_0x52b424['params'][_0x59aa('0x90')],function(_0x3e2741,_0x58c232){if(_0x3e2741){winston[_0x59aa('0x13')](_0x59aa('0xd'),_0x3e2741);return _0x54bbd3['status'](0x1f4)['send']({'success':![],'msg':_0x3e2741});}winston[_0x59aa('0x72')](_0x59aa('0x45'),_0x58c232);_0x54bbd3[_0x59aa('0x2f')](_0x58c232);});});router['get'](_0x59aa('0x4a'),[passport['authenticate'](['basic','jwt'],{'session':![]}),validtoken],function(_0x1b1a83,_0xd09aa9){winston['info'](_0x59aa('0x7c'),_0x1b1a83[_0x59aa('0x87')][_0x59aa('0x8e')]);var _0xcea7ba=require('stripe')(apiSecretKey);_0xcea7ba[_0x59aa('0x9a')]['sessions'][_0x59aa('0x49')](_0x1b1a83[_0x59aa('0x87')][_0x59aa('0x8e')],function(_0x3f389e,_0x1c5bfa){if(_0x3f389e){winston[_0x59aa('0x72')](_0x59aa('0x6a'),_0x3f389e);return _0xd09aa9['status'](0x1f4)[_0x59aa('0xae')]({'success':![],'msg':_0x3f389e});}winston[_0x59aa('0x72')](_0x59aa('0x48'),_0x1c5bfa);_0xd09aa9[_0x59aa('0x2f')](_0x1c5bfa);});});router['get'](_0x59aa('0x27'),[passport['authenticate']([_0x59aa('0xaf'),_0x59aa('0x69')],{'session':![]}),validtoken],function(_0x16a273,_0x5a0f64){winston[_0x59aa('0x74')](_0x59aa('0x28'),_0x16a273[_0x59aa('0x87')]);var _0x53a23e=_0x16a273['params'][_0x59aa('0x58')];winston[_0x59aa('0x74')](_0x59aa('0x8b'),_0x53a23e);SubscriptionPayment['find']({'project_id':_0x53a23e,'stripe_event':_0x59aa('0x92')},async function(_0x39111c,_0x5b9132){if(_0x39111c){winston[_0x59aa('0x74')]('--\x20>\x20get\x20customer\x20from\x20db\x20-\x20Error\x20',_0x39111c);return _0x39111c;}if(_0x5b9132){_0x5b9132[0x0][_0x59aa('0x65')]['customer'];winston[_0x59aa('0x74')](_0x59aa('0x3b'),_0x5b9132[0x0][_0x59aa('0x65')][_0x59aa('0x81')]);const _0x1c8002=_0x5b9132[0x0][_0x59aa('0x65')][_0x59aa('0x81')];const _0x3e633e=require(_0x59aa('0x60'))(apiSecretKey);const _0x28c774=await _0x3e633e['customers'][_0x59aa('0x49')](_0x1c8002);winston[_0x59aa('0x74')]('--\x20>\x20get\x20customer\x20from\x20db\x20>\x20customer\x20from\x20stripe\x20API\x20',_0x28c774);const _0x2bf7fe=await _0x3e633e[_0x59aa('0x7d')][_0x59aa('0x94')]({'customer':_0x1c8002,'type':_0x59aa('0xf')});_0x28c774[_0x59aa('0x7d')]=_0x2bf7fe;winston[_0x59aa('0x74')](_0x59aa('0x6b'),_0x5b9132);_0x5a0f64[_0x59aa('0x2f')](_0x28c774);}});});router[_0x59aa('0x86')](_0x59aa('0x43'),[passport['authenticate'](['basic',_0x59aa('0x69')],{'session':![]}),validtoken],async function(_0x292303,_0x1b2b2b){var _0xbfe552=_0x292303[_0x59aa('0x87')][_0x59aa('0x25')];winston[_0x59aa('0x74')](_0x59aa('0x70'),_0xbfe552);winston[_0x59aa('0x74')](_0x59aa('0xa6'),_0x292303[_0x59aa('0x4d')]);const _0x57e02e=require(_0x59aa('0x60'))(apiSecretKey);let _0x3232d4;try{_0x3232d4=await _0x57e02e[_0x59aa('0x7d')][_0x59aa('0x4')]({'type':_0x59aa('0xf'),'card':{'number':_0x292303['body'][_0x59aa('0x9c')],'exp_month':_0x292303['body'][_0x59aa('0x73')],'exp_year':_0x292303[_0x59aa('0x4d')][_0x59aa('0x3e')],'cvc':_0x292303['body']['credit_card_cvc']}});}catch(_0x1f91bf){winston[_0x59aa('0x13')](_0x59aa('0x3d'),_0x1f91bf);return _0x1b2b2b[_0x59aa('0x6c')](0x1f6)[_0x59aa('0xae')]({'success':![],'msg':_0x1f91bf});}winston[_0x59aa('0x74')](_0x59aa('0x46'),_0x3232d4);try{const _0x4ecceb=await _0x57e02e['paymentMethods'][_0x59aa('0x1e')](_0x3232d4['id'],{'customer':_0xbfe552});winston[_0x59aa('0x74')](_0x59aa('0xa9'),_0x4ecceb);}catch(_0x3584fa){winston[_0x59aa('0x13')](_0x59aa('0x19'),_0x3584fa);return _0x1b2b2b[_0x59aa('0x6c')](0x1f5)[_0x59aa('0xae')]({'success':![],'msg':_0x3584fa});}const _0x36db20=await _0x57e02e[_0x59aa('0x32')][_0x59aa('0x1f')](_0xbfe552,{'invoice_settings':{'default_payment_method':_0x3232d4['id']}});_0x1b2b2b[_0x59aa('0x2f')](_0x36db20);});router[_0x59aa('0x11')](_0x59aa('0x7f'),[passport[_0x59aa('0x33')]([_0x59aa('0xaf'),_0x59aa('0x69')],{'session':![]}),validtoken],async function(_0x56e3be,_0x50e3d5){winston[_0x59aa('0x72')]('get\x20PaymentMethods\x20list\x20req.params',_0x56e3be[_0x59aa('0x87')]);var _0x1c1c8a=_0x56e3be[_0x59aa('0x87')]['customerid'];winston[_0x59aa('0x74')]('get\x20PaymentMethods\x20list\x20req.params\x20>\x20customer_id\x20',_0x1c1c8a);const _0x56e1b9=require('stripe')(apiSecretKey);const _0x3a6567=await _0x56e1b9[_0x59aa('0x32')][_0x59aa('0x49')](_0x1c1c8a);const _0x41178a=_0x3a6567[_0x59aa('0x16')]['default_payment_method'];let _0x369d9b;try{_0x369d9b=await _0x56e1b9['paymentMethods'][_0x59aa('0x94')]({'customer':_0x1c1c8a,'type':_0x59aa('0xf')});winston[_0x59aa('0x74')](_0x59aa('0x67'),_0x369d9b);}catch(_0x40d2e0){return _0x50e3d5[_0x59aa('0x6c')](0x1f5)[_0x59aa('0xae')]({'success':![],'msg':_0x40d2e0});}winston['debug']('get\x20PaymentMethods\x20list\x20>\x20paymentMethods\x20>\x20default_payment_method_id\x20',_0x41178a);_0x369d9b[_0x59aa('0x83')][_0x59aa('0x2d')](_0x89525b=>{if(_0x89525b['id']!==_0x41178a){winston[_0x59aa('0x74')](_0x59aa('0x55'),_0x89525b['id']);detachPaymentFunc(_0x89525b['id'],function(_0x56f7a5){winston[_0x59aa('0x72')](_0x59aa('0x61'),_0x56f7a5);});}});_0x50e3d5['json'](_0x369d9b);});async function detachPaymentFunc(_0x33d0d7,_0x1721b9){winston[_0x59aa('0x74')](_0x59aa('0x22'),_0x33d0d7);const _0x3054d7=require('stripe')(apiSecretKey);let _0x12c022;try{_0x12c022=await _0x3054d7[_0x59aa('0x7d')][_0x59aa('0x2c')](_0x33d0d7);_0x1721b9(_0x12c022);}catch(_0x151989){_0x1721b9(_0x151989);}}module['exports']=router;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBheW1lbnRzL3N0cmlwZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIndpbnN0b24iLCJQcm9qZWN0IiwiU3Vic2NyaXB0aW9uUGF5bWVudCIsIm1vbWVudCIsIm1vbmdvb3NlIiwicGFzc3BvcnQiLCJ2YWxpZHRva2VuIiwiYXBpS2V5IiwicHJvY2VzcyIsInN0cmlwZSIsImVuZHBvaW50U2VjcmV0IiwiYXBpU2VjcmV0S2V5IiwiYm9keVBhcnNlciIsIl8weDNmNzhmNyIsIl8weDIwM2MyNSIsIl8weDNlNDFhMSIsIl8weDNmMWZmYSIsIl8weDM1NGY2YSIsIl8weDRmMjEyOSIsIl8weDE1N2NiMiIsIl8weDQxOTBjMCIsIl8weDM5MGRlMSIsIl8weDE4YjExYiIsIl8weGZkNjMzZiIsIl8weDRiOWJkYiIsIk51bWJlciIsIl8weDFlZGE0ZiIsImdldFN1YnNjcml0aW9uQnlJZCIsIl8weDQ1ZGFiMCIsIl8weDVhODRlNSIsIl8weDQwYTJkYSIsIl8weDJiOTU2NyIsIl8weDNkYzg3YyIsInVwZGF0ZVByb2plY3RQcm9maWxlIiwic2F2ZU9uREIiLCJfMHgyODRjMWEiLCJfMHgxZjZkYmIiLCJfMHgzNjdlMDUiLCJfMHg0N2FhOGUiLCJfMHg5ZTllMzMiLCJnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCIsIl8weDU3MTlhZSIsIl8weDE5OTdiYyIsIl8weDQ3OGM0ZSIsIl8weDQ2YmRiYSIsIl8weDQ2ZGY0NiIsIl8weDE4MzczYiIsIl8weDkzMWM0MiIsIl8weDFhZmI0ZCIsIl8weDQ1Y2ZkNCIsImNvbnNvbGUiLCJzYXZlRmlyc3RJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZCIsIl8weDViMDFlNCIsIl8weDUxNzg5YiIsIl8weDFiZmM5ZCIsIl8weDRkOTg3NyIsIl8weDI3MDg2YSIsIl8weDVkYTVkZCIsIlByb21pc2UiLCJfMHgxOGUwMmIiLCJfMHg1YjMyOTQiLCJfMHgyY2NmNjMiLCJfMHgxMmM0ZjIiLCJfMHgzNzllNzciLCJfMHgzZGY5YmIiLCJfMHg0NzhlZWEiLCJfMHhmMDUxYjMiLCJfMHg0NTc5MTciLCJfMHhkN2FhNjMiLCJfMHgxNGZkYjIiLCJfMHg1NmY0MjIiLCJfMHgyNjIwYWYiLCJfMHgzOWJiMzciLCJfMHgxOTI1OGUiLCJfMHgzYTU3MzkiLCJfMHgzZDdlNGQiLCJfMHgxYjkzNGYiLCJfMHgxZDUyYjUiLCJfMHg0MWM1ZWIiLCJfMHgyZDM4OTciLCJfMHgzMjIxZTUiLCJfMHg2N2IxNGQiLCJfMHgyMjhhNGYiLCJfMHg0ZTcxZmEiLCJfMHgxMGY4YjQiLCJyZXMiLCJfMHgxZjZlOTEiLCJfMHgxNjZjODciLCJfMHg0ZDExOGIiLCJfMHg0NjU5NTYiLCJfMHgyY2ViOTgiLCJfMHg0NzBjNDgiLCJfMHgxOGY1NjQiLCJfMHg0NTU5NzgiLCJfMHgyZDg2ZTAiLCJfMHg0NDM1YjEiLCJfMHgzNTk2MjIiLCJfMHgyZTkxYzkiLCJfMHgyY2I4NzEiLCJfMHhkMGQ3MGIiLCJfMHg0YjIxMGMiLCJfMHg1ZWU1YTAiLCJfMHg1MDE4YjUiLCJfMHgxZDg1MWQiLCJfMHg0ODMxNGYiLCJfMHgxODZhZWIiLCJfMHgyODZiZjQiLCJfMHg1MDNjMmQiLCJfMHgzNGRlZWQiLCJfMHgzOTYyZjkiLCJfMHgxOWQ1N2EiLCJfMHg0YWYyZTMiLCJfMHgyNDU1ZTQiLCJfMHhlMWExNmUiLCJfMHgxYTM3MjkiLCJwcm9qZWN0IiwiXzB4NTJiNDI0IiwiXzB4NTRiYmQzIiwiXzB4MWNjMTE0IiwiXzB4M2UyNzQxIiwiXzB4NThjMjMyIiwiXzB4MWIxYTgzIiwiXzB4ZDA5YWE5IiwiXzB4Y2VhN2JhIiwiXzB4M2YzODllIiwiXzB4MWM1YmZhIiwiXzB4MTZhMjczIiwiXzB4NWEwZjY0IiwiXzB4NTNhMjNlIiwiXzB4MzkxMTFjIiwiXzB4NWI5MTMyIiwiXzB4MWM4MDAyIiwiXzB4M2U2MzNlIiwiXzB4MjhjNzc0IiwiXzB4MmJmN2ZlIiwiXzB4MjkyMzAzIiwiXzB4MWIyYjJiIiwiXzB4YmZlNTUyIiwiXzB4NTdlMDJlIiwiXzB4MzIzMmQ0IiwiXzB4MWY5MWJmIiwiXzB4NGVjY2ViIiwiXzB4MzU4NGZhIiwiXzB4MzZkYjIwIiwiXzB4NTZlM2JlIiwiXzB4NTBlM2Q1IiwiXzB4MWMxYzhhIiwiXzB4NTZlMWI5IiwiXzB4M2E2NTY3IiwiXzB4NDExNzhhIiwiXzB4MzY5ZDliIiwiXzB4NDBkMmUwIiwiXzB4ODk1MjViIiwiZGV0YWNoUGF5bWVudEZ1bmMiLCJfMHg1NmY3YTUiLCJfMHgzM2QwZDciLCJfMHgxNzIxYjkiLCJfMHgzMDU0ZDciLCJfMHgxMmMwMjIiLCJfMHgxNTE5ODkiLCJtb2R1bGUiXSwibWFwcGluZ3MiOiI4NExBQUEsSUFBSUEsT0FBQSxDQUFVQyxPQUFBLEMsZUFBQSxDQUFkLENBQ0EsSUFBSUMsTUFBQSxDQUFTRixPQUFBLEMsUUFBQSxHQUFiLENBRUEsSUFBSUcsT0FBQSxDQUFVRixPQUFBLEMsZUFBQSxDQUFkLENBRUEsSUFBSUcsT0FBQSxDQUFVSCxPQUFBLEMsZUFBQSxDQUFkLENBQ0EsSUFBSUksbUJBQUEsQ0FBc0JKLE9BQUEsQyxlQUFBLENBQTFCLENBQ0EsSUFBSUssTUFBQSxDQUFTTCxPQUFBLEMsZUFBQSxDQUFiLENBQ0EsSUFBSU0sUUFBQSxDQUFXTixPQUFBLEMsZUFBQSxDQUFmLENBQ0EsSUFBSU8sUUFBQSxDQUFXUCxPQUFBLEMsZUFBQSxDQUFmLENBRUFBLE9BQUEsQyxlQUFBLEVBQXdDTyxRQUF4QyxFQUVBLElBQUlDLFVBQUEsQ0FBYVIsT0FBQSxDLGVBQUEsQ0FBakIsQ0FHQSxNQUFNUyxNQUFBLENBQVNDLE9BQUEsQyxlQUFBLEUsZUFBQSxDQUFmLENBQ0FSLE9BQUEsQyxlQUFBLEUsZUFBYyxDQUFrQk8sTUFBaEMsRUFFQSxNQUFNRSxNQUFBLENBQVNYLE9BQUEsQyxlQUFBLEVBQWtCUyxNQUFsQixDQUFmLENBR0EsTUFBTUcsY0FBQSxDQUFpQkYsT0FBQSxDLGVBQUEsRSx1QkFBQSxDQUF2QixDQUNBUixPQUFBLEMsZUFBQSxFLGVBQWMs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dEIsQ0FHQUMsU0FBQSxDQUFTRSxTQUFULEVBSkUsQ0FLRixNQUFPQyxTQUFQLENBQVUsQ0FDVkgsU0FBQSxDQUFTRyxTQUFULEVBRFUsQ0FUOEMsQ0FpRDVEQyxNQUFBLEMsU0FBQSxFQUFpQmpLLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbi8vIHZhciB3aW5zdG9uID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vY29uZmlnL3dpbnN0b24nKTtcbnZhciB3aW5zdG9uID0gcmVxdWlyZSgnLi4vLi4vLi4vY29uZmlnL3dpbnN0b24nKVxuLy8gdmFyIFByb2plY3QgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbW9kZWxzL3Byb2plY3RcIik7XG52YXIgUHJvamVjdCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHMvcHJvamVjdFwiKTtcbnZhciBTdWJzY3JpcHRpb25QYXltZW50ID0gcmVxdWlyZShcIi4uL21vZGVscy9zdWJzY3JpcHRpb24tcGF5bWVudFwiKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbnZhciBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG52YXIgcGFzc3BvcnQgPSByZXF1aXJlKCdwYXNzcG9ydCcpO1xuLy8gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbWlkZGxld2FyZS9wYXNzcG9ydCcpKHBhc3Nwb3J0KTtcbnJlcXVpcmUoXCIuLi8uLi8uLi9taWRkbGV3YXJlL3Bhc3Nwb3J0XCIpKHBhc3Nwb3J0KTtcbi8vIHZhciB2YWxpZHRva2VuID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vbWlkZGxld2FyZS92YWxpZC10b2tlbicpXG52YXIgdmFsaWR0b2tlbiA9IHJlcXVpcmUoJy4uLy4uLy4uL21pZGRsZXdhcmUvdmFsaWQtdG9rZW4nKVxuLy8gU2V0IHlvdXIgc2VjcmV0IGtleTogcmVtZW1iZXIgdG8gY2hhbmdlIHRoaXMgdG8geW91ciBsaXZlIHNlY3JldCBrZXkgaW4gcHJvZHVjdGlvblxuLy8gU2VlIHlvdXIga2V5cyBoZXJlOiBodHRwczovL2Rhc2hib2FyZC5zdHJpcGUuY29tL2FjY291bnQvYXBpa2V5c1xuY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuUEFZTUVOVF9TVFJJUEVfQVBJS0VZO1xud2luc3Rvbi5kZWJ1Zygnc3RyaXBlIGFwaUtleScgKyBhcGlLZXkpO1xuXG5jb25zdCBzdHJpcGUgPSByZXF1aXJlKCdzdHJpcGUnKShhcGlLZXkpO1xuXG4vLyBGaW5kIHlvdXIgZW5kcG9pbnQncyBzZWNyZXQgaW4geW91ciBEYXNoYm9hcmQncyB3ZWJob29rIHNldHRpbmdzXG5jb25zdCBlbmRwb2ludFNlY3JldCA9IHByb2Nlc3MuZW52LlBBWU1FTlRfU1RSSVBFX1NFQ1JFVDtcbndpbnN0b24uZGVidWcoJ3N0cmlwZSBlbmRwb2ludFNlY3JldCcgKyBlbmRwb2ludFNlY3JldCk7XG5cbmNvbnN0IGFwaVNlY3JldEtleSA9IHByb2Nlc3MuZW52LlBBWU1FTlRfU1RSSVBFX0FQSV9TRUNSRVRfS0VZO1xud2luc3Rvbi5kZWJ1Zygnc3RyaXBlIGFwaVNlY3JldEtleScgKyBhcGlTZWNyZXRLZXkpO1xuXG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcblxuLy8gaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvY2hlY2tvdXQvZnVsZmlsbG1lbnQjd2ViaG9va3Ncbi8vIGN1cmwgLVggUE9TVCAtdSBhbmRyZWEubGVvQGYyMS5pdDoxMjM0NTYgLUggJ0NvbnRlbnQtVHlwZTphcHBsaWNhdGlvbi9qc29uJyAtZCAne1widHlwZVwiOlwicGF5bWVudF9pbnRlbnQuc3VjY2VlZGVkXCJ9JyAgaHR0cDovL2xvY2FsaG9zdDozMDAwL21vZHVsZXMvcGF5bWVudHMvc3RyaXBlL3dlYmhvb2tcbnJvdXRlci5wb3N0KCcvd2ViaG9vaycsIGJvZHlQYXJzZXIucmF3KHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pLCBmdW5jdGlvbiAocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgXG4gIHdpbnN0b24uZGVidWcoJ8K7wrvCu8K7IHN0cmlwZSBlbmRwb2ludFNlY3JldDogJyArIGVuZHBvaW50U2VjcmV0KVxuICB3aW5zdG9uLmRlYnVnKCfCu8K7wrvCuyBzdHJpcGUgYXBpS2V5OiAnICsgYXBpS2V5KTtcbiAgd2luc3Rvbi5kZWJ1Zygnc3RyaXBlIGFwaVNlY3JldEtleScgKyBhcGlTZWNyZXRLZXkpO1xuXG4gIGNvbnN0IHNpZyA9IHJlcXVlc3QuaGVhZGVyc1snc3RyaXBlLXNpZ25hdHVyZSddO1xuXG4gIHdpbnN0b24uZGVidWcoJ3N0cmlwZSBzaWc6ICcsIHNpZylcblxuICBsZXQgZXZlbnQ7XG5cbiAgdHJ5IHtcbiAgICBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChyZXF1ZXN0LnJhd0JvZHksIHNpZywgZW5kcG9pbnRTZWNyZXQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB3aW5zdG9uLmVycm9yKCcqKioqIFN0cmlwZSBlcnJvciBjb25zdHJ1Y3RFdmVudDogJywgZXJyLm1lc3NhZ2UpXG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyg0MDApLnNlbmQoYFdlYmhvb2sgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cblxuICAvKipcbiAgICoqISAqKiogSGFuZGxlIHRoZSBjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCBldmVudCAqKipcbiAgICogTk9URTogVEhJUyBFVkVOVCBPQ0NVUiBPTkxZIFdIRU4gSVMgQ1JFQVRFRCBBIE5FVyBTVUJTQ1JJUFRJT05cbiAgICogMSkgRlJPTSBUSEUgUFJPUEVSVFkgXCJjbGllbnRfcmVmZXJlbmNlX2lkXCIgQVJFIE9CVEFJTkVEIFRIRTpcbiAgICogICAgQSkgVVNFUiBJRFxuICAgKiAgICBCKSBQUk9KRUNUIElEIFxuICAgKiAyKSBXSVRIIFRIRSBzdWJzY3JpcHRpb24gSUQgKE5PVEUgaXMgdGhlIHByb3BlcnR5IHN1YnNjcmlwdGlvbikgSVMgUlVOTkVEIEEgQ0FMTEJBQ0sgVE8gU1RSSVBFXG4gICAqICAgIFRPIE9CVEFJTiBUSEUgT0JKRUNUIFwiU1VCU0NSSVBUSU9OXCIgQU5EIFRIRU4gRlJPTSBUSElTIEFSRSBPQlRBSU5FRCBUSEU6XG4gICAqICAgIEEpIHN1YnNjcmlwdGlvblN0YXJ0RGF0ZVxuICAgKiAgICBCKSBzdWJzY3JpcHRpb25FbmREYXRlXG4gICAqICAgIEMpIHF1YW50aXR5ICh3aGljaCBpbiB0aGUgdGlsZWRlc2sgZGFzaGJvYXJkIGNvcnJlc3BvbmRzIHRvIHRoZSBudW1iZXIgb2YgYWdlbnRzIC8gb3BlcmF0b3JzIHNlYXRzKVxuICAgKiAzKSBXSVRIIFRIRSBPQlRBSU5FRCBEQVRBIElTIFVQREFURUQgVEhFIFBST0pFQ1QgJ1BST0ZJTEUnIChpcyBhbiBvYmplY3QgbmVzdGVkIGluIHRoZSBwcm9qZWN0IG9iamVjdCkgXG4gICAqIDQpIFRIRSBPQlRBSU5FRCBPQkpFQ1QgXCJTVUJTQ1JJUFRJT05cIiBBTkQgdGhlIFwiU1VCU0NSSVBUSU9OIElEXCIsIHRoZSBcIlBST0pFQ1QgSURcIiwgdGhlIFwiVVNFUiBJRFwiIEFORCBzdHJpcGVfZXZlbnQ6IFwiY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWRcIiBBUkUgU0FWRUQgT04gT1VSIERCXG4gICAqICAgIEFTIFwiU1VCU0NSSVBUSU9OLVBBWU1FTlRcIlxuICAgKi9cblxuICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJykge1xuICAgIHdpbnN0b24uZGVidWcoJyEhISEhISEhIEhJICEhISEhISEhIGNoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJyk7XG5cbiAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3Q7XG4gICAgd2luc3Rvbi5pbmZvKCdzdHJpcGUgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnLCBzZXNzaW9uKTtcblxuICAgIHZhciBjbGllbnRfcmVmZXJlbmNlX2lkID0gc2Vzc2lvbi5jbGllbnRfcmVmZXJlbmNlX2lkO1xuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIGNsaWVudF9yZWZlcmVuY2VfaWQnLCBjbGllbnRfcmVmZXJlbmNlX2lkKTtcblxuICAgIC8qKiAxQSAqL1xuICAgIHZhciB1c2VyX2lkID0gY2xpZW50X3JlZmVyZW5jZV9pZC5zcGxpdChcIl9cIilbMF07XG4gICAgd2luc3Rvbi5pbmZvKCdzdHJpcGUgdXNlcl9pZDonICsgdXNlcl9pZCk7XG5cbiAgICAvKiogMUIgKi9cbiAgICB2YXIgcHJvamVjdF9pZCA9IGNsaWVudF9yZWZlcmVuY2VfaWQuc3BsaXQoXCJfXCIpWzFdO1xuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIHByb2plY3RfaWQ6ICcgKyBwcm9qZWN0X2lkKTtcblxuICAgIHZhciBwbGFuX25hbWUgPSBjbGllbnRfcmVmZXJlbmNlX2lkLnNwbGl0KFwiX1wiKVsyXTtcbiAgICB3aW5zdG9uLmluZm8oJ3N0cmlwZSBwbGFuX25hbWU6ICcgKyBwbGFuX25hbWUpO1xuXG4gICAgdmFyIHNlYXRzX251bUFzU3RyaW5nID0gY2xpZW50X3JlZmVyZW5jZV9pZC5zcGxpdChcIl9cIilbM107XG4gICAgd2luc3Rvbi5pbmZvKCdzdHJpcGUgc2VhdHNfbnVtOiAnICsgc2VhdHNfbnVtQXNTdHJpbmcgKyAndHlwZW9mICcsIHR5cGVvZiBzZWF0c19udW1Bc1N0cmluZyk7XG5cbiAgICB2YXIgc2VhdHNfbnVtID0gTnVtYmVyKHNlYXRzX251bUFzU3RyaW5nKVxuICAgIHdpbnN0b24uaW5mbygnc3RyaXBlIHNlYXRzX251bUFzU3RyaW5nOiAnICsgc2VhdHNfbnVtICsgJyB0eXBlb2YgJywgdHlwZW9mIHNlYXRzX251bSk7XG5cbiAgICB2YXIgc3Vic2NyaXB0aW9uSWQgPSBldmVudC5kYXRhLm9iamVjdC5zdWJzY3JpcHRpb247XG4gICAgd2luc3Rvbi5pbmZvKCcqKiogKioqICEhISEhISEhISEhISEhISEhISEhISEgY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgLSBzdWJzY3JpcHRpb24gSUQ6ICcsIHN1YnNjcmlwdGlvbklkKTtcblxuICAgIGdldFN1YnNjcml0aW9uQnlJZChzdWJzY3JpcHRpb25JZCkudGhlbihmdW5jdGlvbiAoc3Vic2NyaXB0aW9uX29iaikge1xuXG4gICAgICB2YXIgb2JqZWN0X3R5cGUgPSBzdWJzY3JpcHRpb25fb2JqLm9iamVjdDtcbiAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZCAtIGdldFN1YnNjcml0aW9uQnlJZCBzdWJzY3Igb2JqZWN0X3R5cGU6ICcsIG9iamVjdF90eXBlKTtcblxuICAgICAgLyoqIDJBICovXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uU3RhcnREYXRlID0gbW9tZW50LnVuaXgoc3Vic2NyaXB0aW9uX29iai5jdXJyZW50X3BlcmlvZF9zdGFydCkuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzLlNTUycpXG4gICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgLSBnZXRTdWJzY3JpdGlvbkJ5SWQgKioqIHN0YXJ0ICoqKiA6ICcsIHN1YnNjcmlwdGlvblN0YXJ0RGF0ZSk7XG5cbiAgICAgIC8qKiAyQiAqL1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbkVuZERhdGUgPSBtb21lbnQudW5peChzdWJzY3JpcHRpb25fb2JqLmN1cnJlbnRfcGVyaW9kX2VuZCkuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzLlNTUycpXG4gICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgLSBnZXRTdWJzY3JpcHRpb24gKioqIGVuZCAqKiogOiAnLCBzdWJzY3JpcHRpb25FbmREYXRlKTtcblxuICAgICAgLyoqXG4gICAgICAgKiEgKioqIEJPRFkgKioqXG4gICAgICAgKi9cbiAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgbmFtZTogcGxhbl9uYW1lLFxuICAgICAgICAgIHR5cGU6ICdwYXltZW50JyxcbiAgICAgICAgICBzdWJzY3JpcHRpb25fY3JlYXRpb25fZGF0ZTogc3Vic2NyaXB0aW9uU3RhcnREYXRlLFxuICAgICAgICAgIHN1YlN0YXJ0OiBzdWJzY3JpcHRpb25TdGFydERhdGUsXG4gICAgICAgICAgc3ViRW5kOiBzdWJzY3JpcHRpb25FbmREYXRlLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb25JZCxcbiAgICAgICAgICBsYXN0X3N0cmlwZV9ldmVudDogZXZlbnQudHlwZSxcbiAgICAgICAgICBhZ2VudHM6IHNlYXRzX251bVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKiAzICovXG4gICAgICB1cGRhdGVQcm9qZWN0UHJvZmlsZShwcm9qZWN0X2lkLCBib2R5LCAnY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQnKTtcblxuICAgICAgLyoqIDQgKi9cbiAgICAgIHNhdmVPbkRCKHN1YnNjcmlwdGlvbklkLCBwcm9qZWN0X2lkLCBzdWJzY3JpcHRpb25fb2JqLCB1c2VyX2lkLCBldmVudC50eXBlLCBwbGFuX25hbWUsIHNlYXRzX251bSlcblxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJyoqKiAqKiogY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWQgLSBnZXRTdWJzY3JpdGlvbkJ5SWQgZXJyICcsIGVycik7XG4gICAgfSk7XG5cbiAgfVxuICAvLyBvYmplY3RfdHlwZSA9IHN1YnNjcmlwdGlvbi5cbiAgLyoqXG4gICAqKiEgKioqIEhhbmRsZSB0aGUgaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCBldmVudCAqKipcbiAgICogTk9URTogVEhJUyBFVkVOVCBPQ0NVUiBXSEVOIElTIENSRUFURUQgQSBORVcgU1VCU0NSSVBUSU9OIEFORCBFVkVSWSBUSU1FIFRIRSBTQU1FIElTIFJFTkVXRURcbiAgICogMSkgRlJPTSBUSEUgT0JKRUNUIE9GIFRIRSBFVkVOVCBBUkUgT0JUQUlORUQgVEhFOlxuICAgKiAgICBBKSBzdWJzY3JpcHRpb25TdGFydERhdGVcbiAgICogICAgQikgc3Vic2NyaXB0aW9uRW5kRGF0ZVxuICAgKiAgICBDKSBzdWJzY3JpdHB0aW9uSWQgIFxuICAgKiAyKSB3aGVuIHJlZmVyIHRvIGEgUkVORVdBTCAoIGJpbGxpbmdfcmVhc29uID09PSBzdWJzY3JpcHRpb25fY3ljbGUpXG4gICAqICAgIElGIFRIRSBWQUxVRSBPRiBUSEUgUFJPUEVSVFkgXCJiaWxsaW5nX3JlYXNvblwiIElTIFVOTElLRSBPRiBcInN1YnNjcmlwdGlvbl9jcmVhdGVcIiAoTUVBTlMgVEhBVCBUSEUgRVZFTlQgUkVGRVIgVE8gQSBSRU5FV0FMIFxuICAgKiAgICBGT1IgV0hJQ0ggYmlsbGluZ19yZWFzb246IHN1YnNjcmlwdGlvbl9jeWNsZSBBTkQgTk9UIFRPIFRIRSBGSVJTVCBTVUJTQ1JJUFRJT04pIFxuICAgKiAgICBBKSBJUyBPQlRBSU5FRCBUSEUgJ1NVQlNDUklQVElPTi1QQVlNRU5UJyAod2l0aCBzdHJpcGVfZXZlbnQ6IFwiY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWRcIikgU0FWRUQgQUJPVkUgQU5EIFRIRU4gRlJPTSBUSElTOlxuICAgKiAgICAgICAtIFRIRSBcIlBST0pFQ1QgSURcIiBcbiAgICogICAgICAgLSBUSEUgXCJVU0VSIElEXCJcbiAgICogICAgICAgVE8gT0JUQUlOIFRIRSAnU1VCU0NSSVBUSU9OLVBBWU1FTlQnSU4gT1VSIERCIElTIExPT0tFRCBGT1IgVEhFIFwiU1VCU0NSSVBJT04tUEFZTUVOVFwiIFRIQVQgSEFTIEZPUiBzdWJzY3JpcHRpb24gaWQgVEhFIFZBTFVFIE9GIDFDIEFORCBzdHJpcGVfZXZlbnQ6IFwiY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWRcIlxuICAgKiAgICAgICBUSEUgQ09ORElUSU9OIHN0cmlwZV9ldmVudDogXCJjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZFwiIChOTyBNT1JFOiBvYmplY3RfdHlwZSA9IHN1YnNjcmlwdGlvbikgSVQnUyBORUNFU1NBUlkgVE8gRklMVEVSIFRIRSBcIlNVQlNDUklQSU9OLVBBWU1FTlRTXCIgXG4gICAqICAgICAgIFRIQVQgQ09OVEFJTiBUSEUgIFBST1BFUlRJRVMgIFwicHJvamVjdElEXCIgQU5EIFwidXNlcklEXCJcbiAgICogICAgICAgVEhFIEVYSVNURU5DRSBPRiBBIFwiU1VCU0NSSVBUSU9OLVBBWU1FTlRcIiBXSVRIT1VUIFwicHJvamVjdElEXCIgQU5EIFwidXNlcklEXCIgSVMgRFVFIFRPIFRIRSBGQUNUIFRIQVQgQVQgVEhFIE1PTUVOVCBPRiBUSEUgQ1JFQVRJT04gT0YgQSBTVUJTQ1JJUFRJT04gXG4gICAqICAgICAgIElTIFNBVkVEIElOIE9VUiBEQiBBTFNPIEEgXCJTVUJTQ1JJUFRJT04tUEFZTUVOVFwiIENPUlJFU1BPTkRJTkcgVE8gVEhFIE9CSkVDVCBSRVRVUk5FRCBCWSAgVEhFIEVWRU5UIFwiaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZFwiIFVTRUZVTCBCRUNBVVNFIFxuICAgKiAgICAgICBJVCBDT05UQUlOUyBUSEUgTElOS1MgT0YgVEhFIElOVk9JQ0UgT0YgVEhFIEZJUlNUIFNVQlNDUklQVElPTiAodXNlZCBieSB0aWxlZGVzayBkYXNoYm9hcmQgaW4gdGhlIGNvbXBvbmVudHMgcGF5bWVudHMpXG4gICAqICAgICAgIEJVVCBGUk9NIFdISUNIIElUIElTIE5PVCBQT1NTSUJMRSBQVVNIIEFORCBUSEVOIFRPIFRPIE9CVEFJTiBUSEUgXCJwcm9qZWN0SURcIiBBTkQgXCJ1c2VySURcIlxuICAgKiAgICBCKSBJUyBVUERBVEVEIFRIRSBQUk9KRUNUICdQUk9GSUxFJyBXSVRIOlxuICAgKiAgICAgICAtIERBVEEgT0JUQUlORUQgRlJPTSBUSEUgRVZFTlQnUyBPQkpFQ1Q6XG4gICAqICAgICAgICAgLSBzdWJzY3JpcHRpb25TdGFydERhdGVcbiAgICogICAgICAgICAtIHN1YnNjcmlwdGlvbkVuZERhdGVcbiAgICogICAgICAgICAtIHN1YnNjcmlwdGlvbklkIFxuICAgKiAgICAgICAgIC0gbGFzdF9zdHJpcGVfZXZlbnQgXG4gICAqICAgICAgICAgLSBxdWFudGl0eSAod2hpY2ggaW4gdGhlIGRhc2hib2FyZCBjb3JyZXNwb25kcyB0byB0aGUgbnVtYmVyIG9mIGFnZW50cyAvIG9wZXJhdG9ycyBzZWF0cylcbiAgICogICAgICAgLSBEQVRBIE9CVEFJTkVEIEZST00gVEhFICdTVUJTQ1JJUFRJT04tUEFZTUVOVCcgd2l0aCBzdHJpcGVfZXZlbnQ6IFwiY2hlY2tvdXQuc2Vzc2lvbi5jb21wbGV0ZWRcIlxuICAgKiAgICAgICAgIC0gXCJQUk9KRUNUIElEXCIgYW5kIFwiVVNFUiBJRFwiXG4gICAqICAgIEMpIFRIRSBPQkpFQ1QgT0YgVEhFIEVWRU5UIGludm9pY2UucGF5bWVudF9zdWNjZWVkZWQgQU5EIHRoZSBcIlNVQlNDUklQVElPTiBJRFwiLCB0aGUgXCJQUk9KRUNUIElEXCIsIHRoZSBcIlVTRVIgSURcIiBBTkQgdGhlIFwiT0JKRUNUX1RZUEVcIiAoZXZlbnQpIFxuICAgKiAgICAgICBBUkUgU0FWRUQgQVMgXCJTVUJTQ1JJUFRJT04tUEFZTUVOVFwiIE9OIE9VUiBEQlxuICAgKiAzKSB3aGVuIHJlZmVyIHRvIGEgQ1JFQVRJT04gKGJpbGxpbmdfcmVhc29uID09PSBzdWJzY3JpcHRpb25fY3JlYXRlKVxuICAgKiAgICBBKSBUSEUgT0JKRUNUIE9GIFRIRSBFVkVOVCBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIEFORCBUSEUgREFUQSBldmVudC50eXBlID09PSBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkICBBUkUgU0FWRUQgQVMgXCJTVUJTQ1JJUFRJT04tUEFZTUVOVFwiXG4gICAqICAgICAgIE9OIE9VUiBEQiAoTk9URTogXCJQUk9KRUNUIElEXCIgQU5EIFwiVVNFUiBJRFwiIEFSRSBTQVZFRCBBUyBudWxsIFNJTkNFIElTIE5PVCBQT1NTSUJMRSBUTyBSRVRSSUVWRSBUSEUgVkFMVUVTKSBcbiAgICogXG4gICAqL1xuICBpZiAoZXZlbnQudHlwZSA9PT0gJ2ludm9pY2UucGF5bWVudF9zdWNjZWVkZWQnKSB7XG5cbiAgICB3aW5zdG9uLmluZm8oJyAhISEhISEhISBISSAhISEhISEhISBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkJyk7XG4gICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGludm9pY2UucGF5bWVudF9zdWNjZWVkZWQgLSBCSUxMSU5HIFJFQVNPTiAnLCBldmVudC5kYXRhLm9iamVjdC5iaWxsaW5nX3JlYXNvbik7XG5cbiAgICB2YXIgbGluZXNOdW0gPSBldmVudC5kYXRhLm9iamVjdC5saW5lcy50b3RhbF9jb3VudFxuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gbGluZXNOdW06ICcsIGxpbmVzTnVtKTtcblxuICAgIHZhciBpbmRleCA9IGxpbmVzTnVtIC0gMTtcbiAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCAtIGluZGV4OiAnLCBpbmRleCk7XG5cbiAgICAvKiogMUEgKi8gLy8gVEhJUyBXT1JLU1xuICAgIHZhciBzdWJzY3JpcHRpb25TdGFydERhdGUgPSBtb21lbnQudW5peChldmVudC5kYXRhLm9iamVjdC5saW5lcy5kYXRhW2luZGV4XS5wZXJpb2Quc3RhcnQpLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcy5TU1MnKVxuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gc3RhcnQ6ICcsIHN1YnNjcmlwdGlvblN0YXJ0RGF0ZSk7XG5cbiAgICAvKiogMUIgKi8gLy8gVEhJUyBXT1JLU1xuICAgIHZhciBzdWJzY3JpcHRpb25FbmREYXRlID0gbW9tZW50LnVuaXgoZXZlbnQuZGF0YS5vYmplY3QubGluZXMuZGF0YVtpbmRleF0ucGVyaW9kLmVuZCkuZm9ybWF0KCdZWVlZLU1NLUREVEhIOm1tOnNzLlNTUycpXG4gICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGludm9pY2UucGF5bWVudF9zdWNjZWVkZWQgLSBlbmQ6ICcsIHN1YnNjcmlwdGlvbkVuZERhdGUpO1xuXG4gICAgdmFyIHN1YnNjcmlwdGlvbklkID0gZXZlbnQuZGF0YS5vYmplY3Quc3Vic2NyaXB0aW9uO1xuICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gc3Vic2NyaXB0aW9uIElEOiAnLCBzdWJzY3JpcHRpb25JZCk7XG5cbiAgICBpZiAoc3Vic2NyaXB0aW9uSWQgPT0gbnVsbCkge1xuICAgICAgc3Vic2NyaXB0aW9uSWQgPSBldmVudC5kYXRhLm9iamVjdC5saW5lcy5kYXRhWzBdLnN1YnNjcmlwdGlvbjtcbiAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkIC0gc3Vic2NyaXB0aW9uIElEOiAnLCBzdWJzY3JpcHRpb25JZCk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmRhdGEub2JqZWN0LmJpbGxpbmdfcmVhc29uICE9PSAnc3Vic2NyaXB0aW9uX2NyZWF0ZScpIHtcblxuXG4gICAgICAvLyBUTyBURVNUIFRIRSBSRU5FV0FMIFVOQ09NTUVOVCBTRVQgVElNRU9VVFxuICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvKiogMkEgKi9cbiAgICAgIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50KHN1YnNjcmlwdGlvbklkKS50aGVuKGZ1bmN0aW9uIChzdWJzcHRuX3BheW1lbnQpIHtcbiAgICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50IHN1YnNwdG5fcGF5bWVudDogJywgc3Vic3B0bl9wYXltZW50KTtcbiAgICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50IHN1YnNwdG5fcGF5bWVudCB0eXBlb2Ygc3Vic3B0bl9wYXltZW50OiAnLCB0eXBlb2Ygc3Vic3B0bl9wYXltZW50KTtcbiAgICAgICAgaWYgKHN1YnNwdG5fcGF5bWVudCkge1xuXG4gICAgICAgICAgdmFyIHByb2plY3RJZCA9IHN1YnNwdG5fcGF5bWVudC5wcm9qZWN0X2lkXG4gICAgICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50IHN1YnNwdG5fcGF5bWVudCA+IHByb2plY3RfaWQ6ICcsIHByb2plY3RJZCk7XG5cbiAgICAgICAgICBQcm9qZWN0LmZpbmRPbmUoeyBfaWQ6IHByb2plY3RJZCB9LCBmdW5jdGlvbiAoZXJyLCBwcm9qZWN0KSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAgZmluZCBQcm9qZWN0ICcsIGVycik7XG4gICAgICAgICAgICAgIHJldHVybiAoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAgcHJvamVjdCAnLCBwcm9qZWN0KTtcbiAgICAgICAgICAgICAgd2luc3Rvbi5pbmZvKCcqKiogKioqIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50ICBwcm9qZWN0ID4gcHJvZmlsZScsIHByb2plY3QucHJvZmlsZSk7XG5cbiAgICAgICAgICAgICAgdmFyIHNlYXRzX251bSA9IHByb2plY3QucHJvZmlsZS5hZ2VudHM7XG4gICAgICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAgcHJvamVjdCA+IHByb2ZpbGUgPiBhZ2VudHMnLCBzZWF0c19udW0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHBsYW5fbmFtZSA9IHByb2plY3QucHJvZmlsZS5uYW1lO1xuICAgICAgICAgICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogZ2V0U3ViQnlJZEFuZENoZWNrb3V0U2Vzc2lvbkNvbXBsZXRlZEV2bnQgIHByb2plY3QgPiBwcm9maWxlID4gYWdlbnRzIHR5cGVvZicsIHR5cGVvZiBzZWF0c19udW0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIHVzZXJJZCA9IHN1YnNwdG5fcGF5bWVudC51c2VyX2lkXG4gICAgICAgICAgICAgIHdpbnN0b24uaW5mbygnKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAgcHJvamVjdCA+IHByb2ZpbGUgPiBuYW1lJywgcGxhbl9uYW1lKTtcblxuICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgICAvLyAgQk9EWSBcbiAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgICAgdmFyIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZToge1xuICAgICAgICAgICAgICAgICAgbmFtZTogcGxhbl9uYW1lLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3BheW1lbnQnLFxuICAgICAgICAgICAgICAgICAgc3ViU3RhcnQ6IHN1YnNjcmlwdGlvblN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgIHN1YkVuZDogc3Vic2NyaXB0aW9uRW5kRGF0ZSxcbiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb25JZCxcbiAgICAgICAgICAgICAgICAgIGxhc3Rfc3RyaXBlX2V2ZW50OiBldmVudC50eXBlLFxuICAgICAgICAgICAgICAgICAgYWdlbnRzOiBzZWF0c19udW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvKiogMkIgKi9cbiAgICAgICAgICAgICAgdXBkYXRlUHJvamVjdFByb2ZpbGUocHJvamVjdElkLCBib2R5LCAnaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCcpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLyoqIDJDICovXG4gICAgICAgICAgICAgIHNhdmVPbkRCKHN1YnNjcmlwdGlvbklkLCBwcm9qZWN0SWQsIGV2ZW50LCB1c2VySWQsIGV2ZW50LnR5cGUsIHBsYW5fbmFtZSwgc2VhdHNfbnVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgd2luc3Rvbi5lcnJvcignKioqICoqKiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudCAtIGVyciAnLCBlcnIpO1xuICAgICAgfSk7XG4gICAgICAvLyB9LCA1MDAwKTtcbiAgICB9IFxuICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEub2JqZWN0LmJpbGxpbmdfcmVhc29uID09PSAnc3Vic2NyaXB0aW9uX2NyZWF0ZScpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVU0VDQVNFICBpbnZvaWNlLnBheW1lbnRfc3VjY2VlZGVkICBiaWxsaW5nX3JlYXNvbiBzdWJzY3JpcHRpb25fY3JlYXRlICcpIFxuICAgICAgc2F2ZUZpcnN0SW52b2ljZVBheW1lbnRTdWNjZWVkZWQoc3Vic2NyaXB0aW9uSWQsIGV2ZW50LCBldmVudC50eXBlKTtcbiAgICB9IFxuICBcbiAgfVxuXG4gIC8qKlxuICAgKiohICoqKiBIQU5ETEUgVEhFIEVWRU5UIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkICoqKlxuICAgKiB0aGlzIGV2ZW50IG9jY3VycyB3aGVuIGEgc3Vic2NyaXB0aW9uIGlzIGNhbmNlbGxlZFxuICAgKiAtIGZyb20gdGhlIFRJTEVERVNLJyBkYXNoYm9hcmQgKGJ5IGNsaWNraW5nIENBTkNFTCBTVUJTQ1JJUFRJT04gdGhhdCBjYWxsIGNhbmNlbHN1YnNjcmlwdGlvbigpIC0gc2VlIGJlbG93KVxuICAgKiAtIGZyb20gdGhlIFNUUklQRScgZGFzaGJvYXJkXG4gICAqL1xuICBpZiAoZXZlbnQudHlwZSA9PT0gJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJykge1xuICAgIHdpbnN0b24uaW5mbygnICEhISEhISEhIEhJICEhISEhISEhISEhIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJyk7XG4gICAgd2luc3Rvbi5pbmZvKCdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCBldmVudCAnLCBldmVudCk7XG4gICAgdmFyIHN1YnNjcmlwdGlvbklkID0gZXZlbnQuZGF0YS5vYmplY3QuaWRcbiAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogc3Vic2NyaXB0aW9uIElEICcsIHN1YnNjcmlwdGlvbklkKTtcblxuICAgIGdldFN1YkJ5SWRBbmRDaGVja291dFNlc3Npb25Db21wbGV0ZWRFdm50KHN1YnNjcmlwdGlvbklkKS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb25QYXltZW50KSB7XG4gICAgICAvLyBTdWJzY3JpcHRpb25QYXltZW50LmZpbmQoeyBzdWJzY3JpcHRpb25faWQ6IHN1YnNjcmlwdGlvbklkLCBvYmplY3RfdHlwZTogXCJzdWJzY3JpcHRpb25cIiB9LCBmdW5jdGlvbiAoZXJyLCBzdWJzY3JpcHRpb25QYXltZW50KSB7XG5cbiAgICAgIC8vIGlmIChlcnIpIHtcbiAgICAgIC8vICAgd2luc3Rvbi5pbmZvKCdFcnJvciBnZXR0aW5nIHRoZSBzdWJzY3JpcHRpb25QYXltZW50ICcsIGVycik7XG4gICAgICAvLyAgIHJldHVybiBlcnI7XG4gICAgICAvLyB9XG4gICAgICB3aW5zdG9uLmluZm8oJyoqKiAqKiogwrvCu8K7IMK7wrvCuyBjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCBzdWJzY3JpcHRpb25QYXltZW50ICcsIHN1YnNjcmlwdGlvblBheW1lbnQpO1xuICAgICAgaWYgKHN1YnNjcmlwdGlvblBheW1lbnQpIHsgXG4gICAgICAgIHZhciBwcm9qZWN0SWQgPSBzdWJzY3JpcHRpb25QYXltZW50LnByb2plY3RfaWQ7IFxuICAgICAgICB3aW5zdG9uLmluZm8oJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkIHN1YnNjcmlwdGlvblBheW1lbnQgcHJvamVjdCBpZDogJywgcHJvamVjdElkKVxuICAgICAgICBcbiAgICAgICAgdmFyIHVzZXJJZCA9IHN1YnNjcmlwdGlvblBheW1lbnQudXNlcl9pZDtcbiAgICAgICAgd2luc3Rvbi5pbmZvKCdjdXN0b21lci5zdWJzY3JpcHRpb24uZGVsZXRlZCBzdWJzY3JpcHRpb25QYXltZW50IHVzZXIgaWQ6ICcsIHVzZXJJZClcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiEgKioqIEJPRFkgKioqXG4gICAgICAgKi9cbiAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICBwcm9maWxlOiB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uSWQ6IHN1YnNjcmlwdGlvbklkLFxuICAgICAgICAgIG5hbWU6ICdTYW5kYm94JyxcbiAgICAgICAgICB0eXBlOiAnZnJlZScsXG4gICAgICAgICAgYWdlbnRzOiAxLFxuICAgICAgICAgIGxhc3Rfc3RyaXBlX2V2ZW50OiBldmVudC50eXBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdXBkYXRlUHJvamVjdFByb2ZpbGUocHJvamVjdElkLCBib2R5LCAnc3Vic2NyaXB0aW9uLmRlbGV0ZWQnKTtcbiAgICAgIHNhdmVPbkRCKHN1YnNjcmlwdGlvbklkLCBwcm9qZWN0SWQsIGV2ZW50LmRhdGEub2JqZWN0LCB1c2VySWQsIGV2ZW50LnR5cGUsIHBsYW5fbmFtZSwgMSk7XG5cbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCcqKiogKioqIGN1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkICcsIGVycik7XG4gICAgfSk7XG5cbiAgfVxuICAvLyBSZXR1cm4gYSByZXNwb25zZSB0byBhY2tub3dsZWRnZSByZWNlaXB0IG9mIHRoZSBldmVudFxuICByZXNwb25zZS5qc29uKHsgcmVjZWl2ZWQ6IHRydWUgfSk7XG59KTtcblxuXG5mdW5jdGlvbiBnZXRTdWJCeUlkQW5kQ2hlY2tvdXRTZXNzaW9uQ29tcGxldGVkRXZudChzdWJzY3JpcHRpb25pZCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIFN1YnNjcmlwdGlvblBheW1lbnQuZmluZE9uZSh7IHN1YnNjcmlwdGlvbl9pZDogc3Vic2NyaXB0aW9uaWQsIHN0cmlwZV9ldmVudDogXCJjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZFwiIH0sIGZ1bmN0aW9uIChlcnIsIHN1YnNjcmlwdGlvblBheW1lbnQpIHtcbiAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uX3BheW1lbnQgPSBzdWJzY3JpcHRpb25QYXltZW50O1xuICAgICAgcmVzb2x2ZShzdWJzY3JpcHRpb25fcGF5bWVudCk7XG4gICAgfSk7XG4gIH0pXG59O1xuXG5mdW5jdGlvbiBnZXRTdWJzY3JpdGlvbkJ5SWQoc3Vic2NyaXB0aW9uaWQpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCBfc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuICAgIF9zdHJpcGUuc3Vic2NyaXB0aW9ucy5yZXRyaWV2ZShzdWJzY3JpcHRpb25pZCwgZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcbiAgICAgIHJlc29sdmUoc3Vic2NyaXB0aW9uKTtcbiAgICB9KTtcbiAgfSlcbn07XG5cbi8vIFNFRSBVcGRhdGluZyBuZXN0ZWQgb2JqZWN0IGluIG1vbmdvb3NlIFxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjM4MzI5MjEvdXBkYXRpbmctbmVzdGVkLW9iamVjdC1pbi1tb25nb29zZVxuZnVuY3Rpb24gdXBkYXRlUHJvamVjdFByb2ZpbGUocHJvamVjdF9pZCwgYm9keSwgY2FsbGVkQnkpIHtcbiAgUHJvamVjdC5maW5kQnlJZEFuZFVwZGF0ZShwcm9qZWN0X2lkLCBib2R5LCB7IG5ldzogdHJ1ZSwgdXBzZXJ0OiB0cnVlIH0sIGZ1bmN0aW9uIChlcnIsIHVwZGF0ZWRQcm9qZWN0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgd2luc3Rvbi5lcnJvcigndXBkYXRlUHJvamVjdFByb2ZpbGUgRXJyb3IgJywgZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luc3Rvbi5kZWJ1Zyh1cGRhdGVkUHJvamVjdClcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzYXZlT25EQihzdWJzY3JpcHRpb25pZCwgcHJvamVjdGlkLCBvYmosIHVzZXJpZCwgc3RyaXBlX2V2ZW50LCBwbGFuX25hbWUsIHNlYXRzX251bSkge1xuICB3aW5zdG9uLmluZm8oJ3NhdmVPbkRCIHBsYW5fbmFtZScsIHBsYW5fbmFtZSlcbiAgd2luc3Rvbi5pbmZvKCdzYXZlT25EQiBzZWF0c19udW0nLCBzZWF0c19udW0pXG5cbiAgdmFyIG5ld1BheW1lbnRTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uUGF5bWVudCh7XG4gICAgX2lkOiBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKSxcbiAgICBzdWJzY3JpcHRpb25faWQ6IHN1YnNjcmlwdGlvbmlkLFxuICAgIHByb2plY3RfaWQ6IHByb2plY3RpZCxcbiAgICB1c2VyX2lkOiB1c2VyaWQsXG4gICAgc3RyaXBlX2V2ZW50OiBzdHJpcGVfZXZlbnQsXG4gICAgcGxhbl9uYW1lOiBwbGFuX25hbWUsXG4gICAgYWdlbnRzOiBzZWF0c19udW0sXG4gICAgb2JqZWN0OiBvYmpcbiAgfSk7XG5cbiAgbmV3UGF5bWVudFN1YnNjcmlwdGlvbi5zYXZlKGZ1bmN0aW9uIChlcnIsIHNhdmVkU3Vic2NyaXB0aW9uUGF5bWVudCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJy0tLSA+IEVSUk9SICcsIGVycilcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6ICdFcnJvciBzYXZpbmcgb2JqZWN0LicgfSk7XG4gICAgfVxuICAgIHdpbnN0b24uaW5mbygnc2F2ZWRTdWJzY3JpcHRpb25QYXltZW50ICcsIHNhdmVkU3Vic2NyaXB0aW9uUGF5bWVudCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzYXZlRmlyc3RJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZChzdWJzY3JpcHRpb25pZCwgb2JqLCBzdHJpcGVfZXZlbnQpIHtcbiAgY29uc29sZS5sb2coJ3NhdmVGaXJzdEludm9pY2VQYXltZW50U3VjY2VlZGVkIHN1YnNjcmlwdGlvbmlkJywgc3Vic2NyaXB0aW9uaWQpXG4gIGNvbnNvbGUubG9nKCdzYXZlRmlyc3RJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZCBzdHJpcGVfZXZlbnQnLCBzdHJpcGVfZXZlbnQpXG5cbiAgdmFyIG5ld1BheW1lbnRTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uUGF5bWVudCh7XG4gICAgX2lkOiBuZXcgbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQoKSxcbiAgICBzdWJzY3JpcHRpb25faWQ6IHN1YnNjcmlwdGlvbmlkLFxuICAgIHN0cmlwZV9ldmVudDogc3RyaXBlX2V2ZW50LFxuICAgIG9iamVjdDogb2JqXG4gIH0pO1xuXG4gIG5ld1BheW1lbnRTdWJzY3JpcHRpb24uc2F2ZShmdW5jdGlvbiAoZXJyLCBzYXZlZFN1YnNjcmlwdGlvblBheW1lbnQpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCctLS0gPiBFUlJPUiAnLCBlcnIpXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiAnRXJyb3Igc2F2aW5nIG9iamVjdC4nIH0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnc2F2ZWRTdWJzY3JpcHRpb25QYXltZW50ID4+ICcsIHNhdmVkU3Vic2NyaXB0aW9uUGF5bWVudCk7XG4gIH0pO1xufVxuXG5yb3V0ZXIucHV0KCcvY2FuY2Vsc3Vic2NyaXB0aW9uJywgW3Bhc3Nwb3J0LmF1dGhlbnRpY2F0ZShbJ2Jhc2ljJywgJ2p3dCddLCB7IHNlc3Npb246IGZhbHNlIH0pLCB2YWxpZHRva2VuXSwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHZhciBwcm9qZWN0aWQgPSByZXEuYm9keS5wcm9qZWN0aWRcbiAgdmFyIHVzZXJpZCA9IHJlcS5ib2R5LnVzZXJpZFxuICB3aW5zdG9uLmluZm8oJ8K7wrvCuyDCu8K7wrsgY2FuY2Vsc3Vic2NyaXB0aW9uIHByb2plY3RpZCcsIHByb2plY3RpZCk7XG4gIHdpbnN0b24uaW5mbygnwrvCu8K7IMK7wrvCuyBjYW5jZWxzdWJzY3JpcHRpb24gdXNlcmlkJywgdXNlcmlkKTtcblxuICBQcm9qZWN0LmZpbmRPbmUoeyBfaWQ6IHByb2plY3RpZCB9LCBmdW5jdGlvbiAoZXJyLCBwcm9qZWN0KSB7XG4gICAgaWYgKGVycikge1xuICAgICAgd2luc3Rvbi5lcnJvcignLS0gPiBjYW5jZWxzdWJzY3JpcHRpb24gRXJyb3IgZ2V0dGluZyBwcm9qZWN0ICcsIGVycilcbiAgICAgIHJldHVybiAoZXJyKTtcbiAgICB9XG4gICAgaWYgKHByb2plY3QpIHtcbiAgICAgIHdpbnN0b24uaW5mbygnLS0gPiBjYW5jZWxzdWJzY3JpcHRpb24gIHByb2plY3QgJywgcHJvamVjdCk7XG5cbiAgICAgIHZhciBzdWJzY3JpcHRpb25pZCA9IHByb2plY3QucHJvZmlsZS5zdWJzY3JpcHRpb25JZDtcblxuICAgICAgY29uc3Qgc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuXG4gICAgICBzdHJpcGUuc3Vic2NyaXB0aW9ucy5kZWwoc3Vic2NyaXB0aW9uaWQsIGZ1bmN0aW9uIChlcnIsIGNvbmZpcm1hdGlvbikge1xuICAgICAgICAvLyBhc3luY2hyb25vdXNseSBjYWxsZWRcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHdpbnN0b24uZXJyb3IoJy0tID4gY2FuY2Vsc3Vic2NyaXB0aW9uICBlcnIgJywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiBlcnIgfSlcbiAgICAgICAgfVxuICAgICAgICB3aW5zdG9uLmluZm8oJy0tID4gY2FuY2Vsc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiAnLCBjb25maXJtYXRpb24pXG4gICAgICAgIHJlcy5qc29uKGNvbmZpcm1hdGlvbik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG59KTtcblxucm91dGVyLnB1dCgnL3VwZGF0ZXN1YnNjcmlwdGlvbicsIFtwYXNzcG9ydC5hdXRoZW50aWNhdGUoWydiYXNpYycsICdqd3QnXSwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgdmFsaWR0b2tlbl0sIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuXG4gIHZhciBwcm9qZWN0aWQgPSByZXEuYm9keS5wcm9qZWN0aWRcbiAgdmFyIHVzZXJpZCA9IHJlcS5ib2R5LnVzZXJpZFxuICB2YXIgcHJpY2UgPSByZXEuYm9keS5wcmljZVxuICB3aW5zdG9uLmluZm8oJ8K7wrvCuyDCu8K7wrsgdXBkYXRlc3Vic2NyaXB0aW9uIHByb2plY3RpZCcsIHByb2plY3RpZCk7XG4gIHdpbnN0b24uaW5mbygnwrvCu8K7IMK7wrvCuyB1cGRhdGVzdWJzY3JpcHRpb24gdXNlcmlkJywgdXNlcmlkKTtcbiAgd2luc3Rvbi5pbmZvKCfCu8K7wrsgwrvCu8K7IHVwZGF0ZXN1YnNjcmlwdGlvbiBwcmljZScsIHByaWNlKTtcbiAgY29uc3Qgc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuXG4gIFByb2plY3QuZmluZE9uZSh7IF9pZDogcHJvamVjdGlkIH0sIGZ1bmN0aW9uIChlcnIsIHByb2plY3QpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICB3aW5zdG9uLmVycm9yKCctLSA+IHVwZGF0ZXN1YnNjcmlwdGlvbiBFcnJvciBnZXR0aW5nIHByb2plY3QgJywgZXJyKVxuICAgICAgcmV0dXJuIChlcnIpO1xuICAgIH1cbiAgICBpZiAocHJvamVjdCkge1xuICAgICAgd2luc3Rvbi5pbmZvKCctLSA+IHVwZGF0ZXN1YnNjcmlwdGlvbiAgcHJvamVjdCAnLCBwcm9qZWN0KTtcblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbmlkID0gcHJvamVjdC5wcm9maWxlLnN1YnNjcmlwdGlvbklkO1xuXG4gICAgICAvLyBzdWJzY3JpcHRpb25pZFxuICAgICAgc3RyaXBlLnN1YnNjcmlwdGlvbnMudXBkYXRlKFxuICAgICAgICBzdWJzY3JpcHRpb25pZCxcbiAgICAgICAgLy8geyB0cmlhbF9lbmQ6IDE1NjgyMTA2NTUgfSxcbiAgICAgICAgLy8gZnVuY3Rpb24gKGVyciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIC8vICAgLy8gYXN5bmNocm9ub3VzbHkgY2FsbGVkXG4gICAgICAgIC8vICAgaWYgKGVycikge1xuICAgICAgICAvLyAgICAgd2luc3Rvbi5lcnJvcigndXBkYXRlc3Vic2NyaXB0aW9uIHN1YnNjcmlwdGlvbiBlcnIgJywgZXJyKVxuICAgICAgICAvLyAgICAgcmV0dXJuXG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyAgIHdpbnN0b24uaW5mbygndXBkYXRlc3Vic2NyaXB0aW9uIHN1YnNjcmlwdGlvbiAnLCBzdWJzY3JpcHRpb24pXG4gICAgICAgIC8vIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gc3RyaXBlLnN1YnNjcmlwdGlvbnMucmV0cmlldmUoc3Vic2NyaXB0aW9uaWQsIGZ1bmN0aW9uIChlcnIsIHN1YnNjcmlwdGlvbikge1xuICAgIC8vICAgLy8gYXN5bmNocm9ub3VzbHkgY2FsbGVkXG4gICAgLy8gICBpZiAoZXJyKSB7XG4gICAgLy8gICAgIHdpbnN0b24uaW5mbygncmV0cmlldmUgdXBkYXRlZCBzdWJzY3JpcHRpb24gZXJyICcsIGVycilcbiAgICAvLyAgIH0gZWxzZSB7XG4gICAgLy8gICAgIHdpbnN0b24uaW5mbygnwrvCu8K7wrvCu8K7wrvCu8K7IGdyZXRyaWV2ZSB1cGRhdGVkIHN1YnNjcmlwdGlvbjogJywgc3Vic2NyaXB0aW9uKTtcblxuICAgIC8vICAgfVxuICAgIC8vIH0pXG4gIH0pXG5cbn0pXG5cbnJvdXRlci5nZXQoJy86c3Vic2NyaXB0aW9uaWQnLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcblxuICBTdWJzY3JpcHRpb25QYXltZW50LmZpbmQoeyBzdWJzY3JpcHRpb25faWQ6IHJlcS5wYXJhbXMuc3Vic2NyaXB0aW9uaWQgfSkuc29ydCh7ICdvYmplY3QuY3JlYXRlZCc6IFwiYXNjXCIgfSkuZXhlYyhmdW5jdGlvbiAoZXJyLCBzdWJzY3JpcHRpb25QYXltZW50cykge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZXJyb3IoJy0tID4gR0VUIFNVQlNDUklQVElPTiBQQVlNRU5UUyBFUlJPUnQgJywgcHJvamVjdCk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiBlcnIgfSlcbiAgICB9XG4gICAgcmVzLmpzb24oc3Vic2NyaXB0aW9uUGF5bWVudHMpO1xuICB9KTtcblxufSk7XG5cbi8vICBSRVRSSUVWRSBUSEUgQ1VSUkVOVCBTVUJTQ1JJUFRJT04gRlJPTSBTVFJJUEVcbnJvdXRlci5nZXQoJy9zdHJpcGVzdWJzLzpzdWJzY3JpcHRpb25pZCcsIFtwYXNzcG9ydC5hdXRoZW50aWNhdGUoWydiYXNpYycsICdqd3QnXSwgeyBzZXNzaW9uOiBmYWxzZSB9KSwgdmFsaWR0b2tlbl0sIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuXG4gIHdpbnN0b24uaW5mbygnLS0gPiBzdWJzY3JpcHRpb24gZ2V0IGJ5IGlkIGZyZXEucGFyYW1zLnN1YnNjcmlwdGlvbmlkICcsIHJlcS5wYXJhbXMuc3Vic2NyaXB0aW9uaWQpO1xuICB2YXIgc3RyaXBlID0gcmVxdWlyZSgnc3RyaXBlJykoYXBpU2VjcmV0S2V5KTtcblxuICBzdHJpcGUuc3Vic2NyaXB0aW9ucy5yZXRyaWV2ZShcbiAgICByZXEucGFyYW1zLnN1YnNjcmlwdGlvbmlkLFxuICAgIGZ1bmN0aW9uIChlcnIsIHN1YnNjcmlwdGlvbikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICB3aW5zdG9uLmVycm9yKCctLSA+IHN1YnNjcmlwdGlvbiBnZXQgYnkgaWQgZnJvbSBzdHJpcGUgIGVyciAnLCBlcnIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiBlcnIgfSlcbiAgICAgIH1cbiAgICAgIHdpbnN0b24uaW5mbygnLS0gPiBzdWJzY3JpcHRpb24gZ2V0IGJ5IGlkIGZyb20gc3RyaXBlICcsIHN1YnNjcmlwdGlvbilcbiAgICAgIHJlcy5qc29uKHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICApO1xufSk7XG5cbi8vICBSRVRSSUVWRSBUSEUgQ0hFQ0tPVVQgU0VTU0lPTlxucm91dGVyLmdldCgnL2NoZWNrb3V0U2Vzc2lvbi86c2Vzc2lvbmlkJywgW3Bhc3Nwb3J0LmF1dGhlbnRpY2F0ZShbJ2Jhc2ljJywgJ2p3dCddLCB7IHNlc3Npb246IGZhbHNlIH0pLCB2YWxpZHRva2VuXSwgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG5cbiAgd2luc3Rvbi5pbmZvKCctLSA+IGNoZWNrb3V0U2Vzc2lvbiBwYXJhbXMuc2Vzc2lvbmlkICcsIHJlcS5wYXJhbXMuc2Vzc2lvbmlkKTtcbiAgdmFyIHN0cmlwZSA9IHJlcXVpcmUoJ3N0cmlwZScpKGFwaVNlY3JldEtleSk7XG5cbiAgc3RyaXBlLmNoZWNrb3V0LnNlc3Npb25zLnJldHJpZXZlKFxuICAgIHJlcS5wYXJhbXMuc2Vzc2lvbmlkLFxuICAgIGZ1bmN0aW9uIChlcnIsIHNlc3Npb24pIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgd2luc3Rvbi5pbmZvKCctLSA+IGNoZWNrb3V0U2Vzc2lvbiBnZXQgYnkgaWQgZnJvbSBzdHJpcGUgIGVyciAnLCBlcnIpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiBlcnIgfSlcbiAgICAgIH1cbiAgICAgIHdpbnN0b24uaW5mbygnLS0gPiBjaGVja291dFNlc3Npb24gZ2V0IGJ5IGlkIGZyb20gc3RyaXBlICcsIHNlc3Npb24pXG4gICAgICByZXMuanNvbihzZXNzaW9uKTtcbiAgICB9XG4gICk7XG59KTtcblxuLy9uZXcgY29kZVxucm91dGVyLmdldCgnL2N1c3RvbWVyLzpwcm9qZWN0aWQnLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgd2luc3Rvbi5kZWJ1ZygnwrvCu8K7IMK7wrvCuyBnZXQgY3VzdG9tZXIgZnJvbSBkYiAnLCByZXEucGFyYW1zKVxuICB2YXIgcHJvamVjdGlkID0gcmVxLnBhcmFtcy5wcm9qZWN0aWRcblxuICB3aW5zdG9uLmRlYnVnKCfCu8K7wrsgwrvCu8K7IGdldCBjdXN0b21lciBmcm9tIGRiIC0gcHJvamVjdGlkJywgcHJvamVjdGlkKTtcblxuICBTdWJzY3JpcHRpb25QYXltZW50LmZpbmQoeyBwcm9qZWN0X2lkOiBwcm9qZWN0aWQsIHN0cmlwZV9ldmVudDogXCJjaGVja291dC5zZXNzaW9uLmNvbXBsZXRlZFwiIH0sIGFzeW5jIGZ1bmN0aW9uIChlcnIsIHN1YnNjcmlwdGlvbikge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHdpbnN0b24uZGVidWcoJy0tID4gZ2V0IGN1c3RvbWVyIGZyb20gZGIgLSBFcnJvciAnLCBlcnIpXG4gICAgICByZXR1cm4gKGVycik7XG4gICAgfVxuICAgIGlmIChzdWJzY3JpcHRpb24pIHtcblxuICAgICAgc3Vic2NyaXB0aW9uWzBdLm9iamVjdC5jdXN0b21lclxuICAgICAgd2luc3Rvbi5kZWJ1ZygnLS0gPiBnZXQgY3VzdG9tZXIgZnJvbSBkYiAtIHN1YnNjcmlwdGlvbiA+IGN1c3RvbWVyIGlkICcsIHN1YnNjcmlwdGlvblswXS5vYmplY3QuY3VzdG9tZXIpO1xuICAgICAgY29uc3QgY3VzdG9tZXJpZCA9IHN1YnNjcmlwdGlvblswXS5vYmplY3QuY3VzdG9tZXJcbiAgICAgIGNvbnN0IHN0cmlwZSA9IHJlcXVpcmUoXCJzdHJpcGVcIikoYXBpU2VjcmV0S2V5KTtcblxuICAgICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLnJldHJpZXZlKFxuICAgICAgICBjdXN0b21lcmlkXG4gICAgICApO1xuICAgICAgd2luc3Rvbi5kZWJ1ZygnLS0gPiBnZXQgY3VzdG9tZXIgZnJvbSBkYiA+IGN1c3RvbWVyIGZyb20gc3RyaXBlIEFQSSAnLCBjdXN0b21lcilcblxuICAgICAgY29uc3QgcGF5bWVudE1ldGhvZHMgPSBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMubGlzdCh7XG4gICAgICAgIGN1c3RvbWVyOiBjdXN0b21lcmlkLFxuICAgICAgICB0eXBlOiAnY2FyZCcsXG4gICAgICB9KTtcbiAgICAgIGN1c3RvbWVyWydwYXltZW50TWV0aG9kcyddID0gcGF5bWVudE1ldGhvZHM7XG4gICAgICB3aW5zdG9uLmRlYnVnKCctLSA+IGdldCBjdXN0b21lciBmcm9tIGRiID4gY3VzdG9tZXIgKyBwYXltZW50TWV0aG9kcyAnLCBzdWJzY3JpcHRpb24pXG4gICAgICByZXMuanNvbihjdXN0b21lcilcbiAgICB9XG4gIH0pXG59KTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVXBkYXRlZCBjdXN0b21lclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxucm91dGVyLnBvc3QoJy9jdXN0b21lcnMvOmN1c3RvbWVyaWQnLCBbcGFzc3BvcnQuYXV0aGVudGljYXRlKFsnYmFzaWMnLCAnand0J10sIHsgc2Vzc2lvbjogZmFsc2UgfSksIHZhbGlkdG9rZW5dLCBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgdmFyIGN1c3RvbWVyaWQgPSByZXEucGFyYW1zLmN1c3RvbWVyaWQ7XG4gIHdpbnN0b24uZGVidWcoJ8K7wrvCuyDCu8K7wrsgIHVwZGF0ZSBjdXN0b21lciAtIGN1c3RvbWVyaWQgZnJvbSBwYXJhbXMgJywgY3VzdG9tZXJpZCk7XG4gIHdpbnN0b24uZGVidWcoJ8K7wrvCuyDCu8K7wrsgIHVwZGF0ZSBjdXN0b21lciAtIGNjIGZyb20gYm9keSAnLCByZXEuYm9keSk7XG5cbiAgY29uc3Qgc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuXG4gIGxldCBwYXltZW50TWV0aG9kO1xuICB0cnkge1xuICAgIHBheW1lbnRNZXRob2QgPSBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMuY3JlYXRlKHtcbiAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgIGNhcmQ6IHtcbiAgICAgICAgbnVtYmVyOiByZXEuYm9keS5jcmVkaXRfY2FyZF9udW0sXG4gICAgICAgIGV4cF9tb250aDogcmVxLmJvZHkuZXhwaXJhdGlvbl9kYXRlX21vbnRoLFxuICAgICAgICBleHBfeWVhcjogcmVxLmJvZHkuZXhwaXJhdGlvbl9kYXRlX3llYXIsXG4gICAgICAgIGN2YzogcmVxLmJvZHkuY3JlZGl0X2NhcmRfY3ZjLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHdpbnN0b24uZXJyb3IoJ8K7wrvCuyDCu8K7wrsgIHBheW1lbnRNZXRob2QgY3JlYXRlICBlcnJvciAnLCBlKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMikuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGUgfSlcblxuICB9XG4gIHdpbnN0b24uZGVidWcoJ8K7wrvCuyDCu8K7wrsgIHBheW1lbnRNZXRob2QnLCBwYXltZW50TWV0aG9kKVxuXG4gIHRyeSB7XG4gICAgY29uc3QgX3BheW1lbnRNZXRob2QgPSBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMuYXR0YWNoKFxuICAgICAgcGF5bWVudE1ldGhvZC5pZCxcbiAgICAgIHsgY3VzdG9tZXI6IGN1c3RvbWVyaWQgfVxuICAgICk7XG5cbiAgICB3aW5zdG9uLmRlYnVnKCfCu8K7wrsgwrvCu8K7ICBwYXltZW50TWV0aG9kIGF0dGFjaGVkICcsIF9wYXltZW50TWV0aG9kKVxuICB9IGNhdGNoIChlKSB7XG4gICAgd2luc3Rvbi5lcnJvcignwrvCu8K7IMK7wrvCuyAgcGF5bWVudE1ldGhvZCBhdHRhY2hlZCAgZXJyb3IgJywgZSlcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDEpLnNlbmQoeyBzdWNjZXNzOiBmYWxzZSwgbXNnOiBlIH0pXG4gIH1cblxuICBjb25zdCBfY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLnVwZGF0ZShcbiAgICBjdXN0b21lcmlkLFxuICAgIHtcbiAgICAgIGludm9pY2Vfc2V0dGluZ3M6IHsgZGVmYXVsdF9wYXltZW50X21ldGhvZDogcGF5bWVudE1ldGhvZC5pZCB9XG4gICAgfSk7XG4gIHJlcy5qc29uKF9jdXN0b21lcik7XG59KTtcblxuXG5yb3V0ZXIuZ2V0KCcvcGF5bWVudF9tZXRob2RzLzpjdXN0b21lcmlkJywgW3Bhc3Nwb3J0LmF1dGhlbnRpY2F0ZShbJ2Jhc2ljJywgJ2p3dCddLCB7IHNlc3Npb246IGZhbHNlIH0pLCB2YWxpZHRva2VuXSwgYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIHdpbnN0b24uaW5mbygnZ2V0IFBheW1lbnRNZXRob2RzIGxpc3QgcmVxLnBhcmFtcycsIHJlcS5wYXJhbXMpXG4gIHZhciBjdXN0b21lcl9pZCA9IHJlcS5wYXJhbXMuY3VzdG9tZXJpZDtcbiAgd2luc3Rvbi5kZWJ1ZygnZ2V0IFBheW1lbnRNZXRob2RzIGxpc3QgcmVxLnBhcmFtcyA+IGN1c3RvbWVyX2lkICcsIGN1c3RvbWVyX2lkKVxuICBjb25zdCBzdHJpcGUgPSByZXF1aXJlKFwic3RyaXBlXCIpKGFwaVNlY3JldEtleSk7XG5cbiAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLnJldHJpZXZlKFxuICAgIGN1c3RvbWVyX2lkXG4gICk7XG5cbiAgY29uc3QgZGVmYXVsdF9wYXltZW50X21ldGhvZF9pZCA9IGN1c3RvbWVyLmludm9pY2Vfc2V0dGluZ3MuZGVmYXVsdF9wYXltZW50X21ldGhvZFxuICBsZXQgcGF5bWVudE1ldGhvZHM7XG4gIHRyeSB7XG4gICAgcGF5bWVudE1ldGhvZHMgPSBhd2FpdCBzdHJpcGUucGF5bWVudE1ldGhvZHMubGlzdCh7XG4gICAgICBjdXN0b21lcjogY3VzdG9tZXJfaWQsXG4gICAgICB0eXBlOiAnY2FyZCcsXG4gICAgfSk7XG4gICAgd2luc3Rvbi5kZWJ1ZygnZ2V0IFBheW1lbnRNZXRob2RzIGxpc3QgPiBwYXltZW50TWV0aG9kcyAnLCBwYXltZW50TWV0aG9kcylcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMSkuc2VuZCh7IHN1Y2Nlc3M6IGZhbHNlLCBtc2c6IGUgfSlcbiAgfVxuXG4gIHdpbnN0b24uZGVidWcoJ2dldCBQYXltZW50TWV0aG9kcyBsaXN0ID4gcGF5bWVudE1ldGhvZHMgPiBkZWZhdWx0X3BheW1lbnRfbWV0aG9kX2lkICcsIGRlZmF1bHRfcGF5bWVudF9tZXRob2RfaWQpXG4gIHBheW1lbnRNZXRob2RzLmRhdGEuZm9yRWFjaChwYXltZW50TWV0aG9kID0+IHtcbiAgICBpZiAocGF5bWVudE1ldGhvZC5pZCAhPT0gZGVmYXVsdF9wYXltZW50X21ldGhvZF9pZCkge1xuICAgICAgd2luc3Rvbi5kZWJ1ZygnZ2V0IFBheW1lbnRNZXRob2RzIGxpc3QgPiBwYXltZW50TWV0aG9kcyA+IHBheW1lbnRNZXRob2RzLmRhdGEgJywgcGF5bWVudE1ldGhvZC5pZClcbiAgICAgIGRldGFjaFBheW1lbnRGdW5jKHBheW1lbnRNZXRob2QuaWQsIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgd2luc3Rvbi5pbmZvKCdkZXRhY2hQYXltZW50RnVuYyByZXN1bHQgJywgcmVzdWx0KVxuICAgICAgfSlcbiAgICB9XG4gIH0pO1xuICByZXMuanNvbihwYXltZW50TWV0aG9kcylcbn0pXG5cbmFzeW5jIGZ1bmN0aW9uIGRldGFjaFBheW1lbnRGdW5jKHBheW1lbnRNZXRob2RpZCwgY2FsbGJhY2spIHtcbiAgd2luc3Rvbi5kZWJ1ZygnZGV0YWNoUGF5bWVudEZ1bmN0ID4gcGF5bWVudE1ldGhvZGlkICcsIHBheW1lbnRNZXRob2RpZClcbiAgY29uc3Qgc3RyaXBlID0gcmVxdWlyZShcInN0cmlwZVwiKShhcGlTZWNyZXRLZXkpO1xuICBsZXQgcGF5bWVudE1ldGhvZDtcbiAgdHJ5IHtcbiAgICBwYXltZW50TWV0aG9kID0gYXdhaXQgc3RyaXBlLnBheW1lbnRNZXRob2RzLmRldGFjaChcbiAgICAgIHBheW1lbnRNZXRob2RpZFxuICAgICk7XG4gICAgY2FsbGJhY2socGF5bWVudE1ldGhvZClcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhbGxiYWNrKGUpXG4gIH1cbn1cblxuXG5cbi8vIGN1cmwgLVggUE9TVCAtdSBhbmRyZWEubGVvQGYyMS5pdDoxMjM0NTYgLUggJ0NvbnRlbnQtVHlwZTphcHBsaWNhdGlvbi9qc29uJyAtZCAne1widHlwZVwiOlwicGF5bWVudF9pbnRlbnQuc3VjY2VlZGVkXCJ9JyAgaHR0cDovL2xvY2FsaG9zdDozMDAwL21vZHVsZXMvcGF5bWVudHMvc3RyaXBlL3dlYmhvb2tcblxuLy8gcm91dGVyLnBvc3QoJy93ZWJob29rJywgZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHtcbi8vICAgd2luc3Rvbi5pbmZvKCdzdHJpcGUgd2ViaG9vaycpO1xuXG4vLyAvLyBNYXRjaCB0aGUgcmF3IGJvZHkgdG8gY29udGVudCB0eXBlIGFwcGxpY2F0aW9uL2pzb25cbi8vIC8vIGFwcC5wb3N0KCcnLCBib2R5UGFyc2VyLnJhdyh7dHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nfSksIChyZXF1ZXN0LCByZXNwb25zZSkgPT4ge1xuLy8gICAgIGxldCBldmVudCA9IHJlcXVlc3QuYm9keTtcbi8vICAgICB3aW5zdG9uLmluZm8oJ2V2ZW50JyxldmVudCk7ICBcblxuLy8gICAgIC8vIEhhbmRsZSB0aGUgZXZlbnRcbi8vICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbi8vICAgICAgIGNhc2UgJ3BheW1lbnRfaW50ZW50LnN1Y2NlZWRlZCc6XG4vLyAgICAgICAgIGNvbnN0IHBheW1lbnRJbnRlbnQgPSBldmVudC5kYXRhLm9iamVjdDtcbi8vICAgICAgICAgaGFuZGxlUGF5bWVudEludGVudFN1Y2NlZWRlZChwYXltZW50SW50ZW50KTtcbi8vICAgICAgICAgYnJlYWs7XG4vLyAgICAgICBjYXNlICdwYXltZW50X21ldGhvZC5hdHRhY2hlZCc6XG4vLyAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBldmVudC5kYXRhLm9iamVjdDtcbi8vICAgICAgICAgaGFuZGxlUGF5bWVudE1ldGhvZEF0dGFjaGVkKHBheW1lbnRNZXRob2QpO1xuLy8gICAgICAgICBicmVhaztcbi8vICAgICAgIC8vIC4uLiBoYW5kbGUgb3RoZXIgZXZlbnQgdHlwZXNcbi8vICAgICAgIGRlZmF1bHQ6XG4vLyAgICAgICAgIC8vIFVuZXhwZWN0ZWQgZXZlbnQgdHlwZVxuLy8gICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDQwMCkuZW5kKCk7XG4vLyAgICAgfVxuXG4vLyAgICAgLy8gUmV0dXJuIGEgcmVzcG9uc2UgdG8gYWNrbm93bGVkZ2UgcmVjZWlwdCBvZiB0aGUgZXZlbnRcbi8vICAgICByZXNwb25zZS5qc29uKHtyZWNlaXZlZDogdHJ1ZX0pO1xuLy8gfSk7XG5cblxuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJmaWxlIjoicGF5bWVudHMvc3RyaXBlL2luZGV4LmpzIn0=
